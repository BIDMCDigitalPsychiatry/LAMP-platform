<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-data_science/jsonata" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Using Document Transformations | LAMP Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.lamp.digital/logo.png"><meta data-rh="true" name="twitter:image" content="https://docs.lamp.digital/logo.png"><meta data-rh="true" property="og:url" content="https://docs.lamp.digital/data_science/jsonata"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using Document Transformations | LAMP Platform"><meta data-rh="true" name="description" content="The LAMP Platform supports Document Transformations using the JSONata query language developed by IBM. The following documentation is extracted from the JSONata documentation website."><meta data-rh="true" property="og:description" content="The LAMP Platform supports Document Transformations using the JSONata query language developed by IBM. The following documentation is extracted from the JSONata documentation website."><link data-rh="true" rel="icon" href="/logo.png"><link data-rh="true" rel="canonical" href="https://docs.lamp.digital/data_science/jsonata"><link data-rh="true" rel="alternate" href="https://docs.lamp.digital/data_science/jsonata" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.lamp.digital/data_science/jsonata" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-192736629-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.95a412e9.css">
<script src="/assets/js/runtime~main.91136770.js" defer="defer"></script>
<script src="/assets/js/main.84bfe505.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="LAMP Platform" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/logo.png" alt="LAMP Platform" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">LAMP Platform</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/">User Guide</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/app">Download App</a></li><li><a class="dropdown__link" href="/bug">Report Bug</a></li><li><a class="dropdown__link" href="/faq">FAQ</a></li></ul></div><a class="navbar__item navbar__link" href="/api">API</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://github.com/BIDMCDigitalPsychiatry/LAMP-platform/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="mailto:team@digitalpsych.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">LAMP Platform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/app">Quick Links</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/using/learn">How to use mindLAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/start_here/overview">Setting up mindLAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/develop/intro">Developing LAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/data_science/intro">Cortex &amp; API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/data_science/data_types/activity_types">Data Types</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/data">How does the LAMP Data Format Work?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/python">Preparing to Analyze Your Data in Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/r">Preparing to Analyze Your Data in R</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/data_science/cortex/getting-started">Cortex</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/data_science/jsonata">Using Document Transformations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/data_portal">Using the LAMP Data Portal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/tags">Tags &amp; Attachments</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/interest">Get Started with mindLAMP</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cortex &amp; API</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Using Document Transformations</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using Document Transformations</h1></header>
<h1>Overview</h1>
<p>The LAMP Platform supports Document Transformations using the JSONata query language developed by IBM. <a href="https://docs.jsonata.org/" target="_blank" rel="noopener noreferrer">The following documentation is extracted from the JSONata documentation website.</a></p>
<p>The following methods corresponding to API calls have been added to the JSONata engine:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.ActivityEvent.list(participant_id: string, origin: string | null, from: number | null, to: number | null, limit: number | null) =&gt; ActivityEvent[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.ActivityEvent.create(participant_id: string, activity_events: ActivityEvent | ActivityEvent[]) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Activity.list(study_id: string, ignore_binary: boolean = true, sibling: boolean = false) =&gt; Activity[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Activity.create(activity_id: string, activity: Activity) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Activity.get(activity_id: string) =&gt; Activity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Activity.set(activity_id: string, activity: Activity | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.ActivitySpec.list() =&gt; ActivitySpec[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.ActivitySpec.create(activity_spec: ActivitySpec) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.ActivitySpec.get(activity_spec_id: string) =&gt; ActivitySpec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.ActivitySpec.set(activity_spec_id: string, activity_spec: ActivitySpec | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Credential.list(type_id: string | null) =&gt; Credential[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Credential.create(type_id: string | null, credential: Credential) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Credential.get(type_id: string | null, access_key: string) =&gt; Credential</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Credential.set(type_id: string | null, access_key: string, credential: Credential | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Participant.list(study_id: string, sibling: boolean = false) =&gt; Participant[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Participant.create(study_id: string, participant: Participant) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Participant.get(participant_id: string) =&gt; Participant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Participant.set(participant_id: string, participant: Participant) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Researcher.list() =&gt; Researcher[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Researcher.create(researcher: Researcher) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Researcher.get(researcher_id: string) =&gt; Researcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Researcher.set(researcher_id: string, researcher: Researcher | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.SensorEvent.list(participant_id: string, origin: string | null, from: number | null, to: number | null, limit: number | null) =&gt; SensorEvent[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.SensorEvent.create(participant_id: string, sensor_events: SensorEvent | SensorEvent[]) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Sensor.list(study_id: string, ignore_binary: boolean = true, sibling: boolean = false) =&gt; Sensor[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Sensor.create(study_id: string, sensor: Sensor) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Sensor.get(sensor_id: string) =&gt; Sensor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Sensor.set(sensor_id: string, sensor: Sensor | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.SensorSpec.list() =&gt; SensorSpec[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.SensorSpec.create(sensor_spec: SensorSpec) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.SensorSpec.get(sensor_spec_id: string) =&gt; SensorSpec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.SensorSpec.set(sensor_spec_id: string, sensor_spec: SensorSpec | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Study.list(researcher_id: string) =&gt; Study[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Study.create(researcher_id: string, study: Study) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Study.get(study_id: string) =&gt; Study</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Study.set(study_id: string, study: Study | null) =&gt; void</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Type.parent(type_id: string) =&gt; string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Tag.list(type_id: string) =&gt; string[]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Tag.get(type_id: string, attachment_key: string) =&gt; any</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$LAMP.Tag.set(type_id: string, attachment_key: string, target: string, attachment_value: string) =&gt; void</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>JSONata is a lightweight query and transformation language for JSON data. Inspired by the &#x27;location path&#x27; semantics of XPath 3.1, it allows sophisticated queries to be expressed in a compact and intuitive notation.  A rich complement of built in operators and functions is provided for manipulating and combining extracted data, and the results of queries can be formatted into any JSON output structure using familiar JSON object and array syntax. Coupled with the facility to create user defined functions, advanced expressions can be built to tackle any JSON query and transformation task. <a href="http://try.jsonata.org/" target="_blank" rel="noopener noreferrer">Try it out here.</a></p>
<h1>Simple Queries</h1>
<p>To support the extraction of values from a JSON structure, a location path syntax is defined. In common with XPath, this will select all possible values in the document that match the specified location path.  The two structural constructs of JSON are objects and arrays.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="navigating-json-objects">Navigating JSON Objects<a href="#navigating-json-objects" class="hash-link" aria-label="Direct link to Navigating JSON Objects" title="Direct link to Navigating JSON Objects">​</a></h2>
<p>A JSON object is an associative array (a.k.a map or hash). The location path syntax to navigate into an arbitrarily deeply nested structure of JSON objects comprises the field names separated by dot &#x27;.&#x27; delimiters. The expression returns the JSON value referenced after navigating to the last step in the location path.  If during the navigation of the location path, a field is not found, then the expression returns nothing (represented by Javascript <em>undefined</em>).  No errors are thrown as a result of non-existing data in the input document.</p>
<p>The following sample JSON document is used by examples throughout this guide, unless otherwise indicated:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;FirstName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Fred&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Surname&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Smith&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Age&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">28</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Street&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hursley Park&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;City&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Winchester&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Postcode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SO21 2JN&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Phone&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;home&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;number&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0203 544 1234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;office&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;number&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;office&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;number&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001235&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mobile&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;number&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;077 7700 1234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;work&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fred.smith@my-work.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fsmith@my-work.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;home&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;freddy@my-social.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;frederic.smith@very-serious.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Other&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Over 18 ?&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Misc&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Alternative.Address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Street&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Brick Lane&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;City&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;London&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Postcode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;E1 6RF&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4>
<p>Here are some example expressions and their results when applied to the above JSON document:</p>
<ul>
<li>
<p>Returns a JSON string (&quot;double quoted&quot;)</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Surname</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Smith&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Returns a JSON number</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Age</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Field references are separated by &#x27;.&#x27;</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Address.City</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Winchester&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Matched the path and returns the null value</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Other.Misc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Path not found.  Returns nothing (i.e. Javascript <em>undefined</em>)
<strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Other.Nothing</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Field references containing whitespace or reserved tokens can be enclosed in backticks</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Other.`Over 18 ?`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="navigating-json-arrays">Navigating JSON Arrays<a href="#navigating-json-arrays" class="hash-link" aria-label="Direct link to Navigating JSON Arrays" title="Direct link to Navigating JSON Arrays">​</a></h2>
<p>JSON arrays are used when an ordered collection of values is required.  Each value in the array is associated with an index (position) rather than a name, so in order to address individual values in an array, extra syntax is required to specify the index.  This is done using square brackets after the field name of the array.  If the square brackets contains a number, or an expression that evaluates to a number, then the number represents the index of the value to select.  Indexes are zero offset, i.e. the first value in an array <code>arr</code> is <code>arr[0]</code>.  If the number is not an integer, then it is rounded <em>down</em> to an integer.  If the expression in square brackets is non-numeric, or is an expression that doesn&#x27;t evaluate to a number, then it is treated as a <a href="#predicates">predicate</a>.</p>
<p>Negative indexes count from the end of the array, for example, <code>arr[-1]</code> will select the last value, <code>arr[-2]</code> the second to last, etc. If an index is specified that exceeds the size of the array, then nothing is selected.</p>
<p>If no index is specified for an array (i.e. no square brackets after the field reference), then the whole array is selected. If the array contains objects, and the location path selects fields within these objects, then each object within the array will be queried for selection.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-1">Examples<a href="#examples-1" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4>
<ul>
<li>
<p>Returns the first item (an object)</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ &quot;type&quot;: &quot;home&quot;, &quot;number&quot;: &quot;0203 544 1234&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Returns the second item</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[1]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ &quot;type&quot;: &quot;office&quot;, &quot;number&quot;: &quot;01962 001234&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Returns the last item</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[-1]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ &quot;type&quot;: &quot;mobile&quot;, &quot;number&quot;: &quot;077 7700 1234&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Negative indexed count from the end</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[-2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ &quot;type&quot;: &quot;office&quot;, &quot;number&quot;: &quot;01962 001235&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Doesn&#x27;t exist - returns nothing
<strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[8]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Selects the <code>number</code> field in the first item</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[0].number</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;0203 544 1234&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>No index is given to <code>Phone</code> so it selects all of them (the whole array), then it selects all the <code>number</code> fields for each of them</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone.number</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ &quot;0203 544 1234&quot;, &quot;01962 001234&quot;, &quot;01962 001235&quot;, &quot;077 7700 1234&quot; ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Might expect it to just return the first number, but it returns the first number of each of the items selected by <code>Phone</code></p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone.number[0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ &quot;0203 544 1234&quot;, &quot;01962 001234&quot;, &quot;01962 001235&quot;, &quot;077 7700 1234&quot; ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Applies the index to the array returned by <code>Phone.number</code>. One use of <a href="#parenthesized-expressions-and-blocks">parentheses</a>.</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(Phone.number)[0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;0203 544 1234&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Returns a range of items by creating an array of indexes</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone[[0..1]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ &quot;type&quot;: &quot;home&quot;, &quot;number&quot;: &quot;0203 544 1234&quot; },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ &quot;type&quot;: &quot;office&quot;, &quot;number&quot;: &quot;01962 001234&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Result sequences</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Sequence flattening</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Empty sequences and singleton sequences</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Top level arrays, nested arrays and array flattening</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Consider the JSON document:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;ref&quot;: [ 1,2 ] },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;ref&quot;: [ 3,4 ] }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">At the top level, we have an array rather than an object.  If we want to select the first object in this top level array, we don&#x27;t have a field name to append the `[0]` to.  We can&#x27;t use `[0]` on its own because that clashes with the [array constructor](#array-constructors) syntax.  However, we can use the _context_ reference `$` to refer to the start of the document as follows:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$` at the start of an expression refers to the entire input document</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>$[0]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>{ &quot;ref&quot;: [ 1, 2 ] }</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `.ref` here returns the entire internal array</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>$[0].ref</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[ 1,2 ]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- returns element on first position of the internal array</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>$[0].ref[0]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>1</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Despite the structure of the nested array, the resultant selection is flattened into a single flat array.  The original nested structure of the input arrays is lost. See [Array constructors](#array-constructors) for how to maintain the original structure in the results.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>$.ref</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[ 1, 2, 3, 4 ]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Query refinement using predicate expressions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Predicates</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">At any step in a location path, the selected items can be filtered using a predicate - `[expr]` where `expr` evaluates to a Boolean value.  Each item in the selection is tested against the expression, if it evaluates to `true`, then the item is kept; if `false`, it is removed from the selection. The expression is evaluated relative to the current (context) item being tested, so if the predicate expression performs navigation, then it is relative to this context item.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Examples:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Select the `Phone` items that have a `type` field that equals `&quot;mobile&quot;`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Phone[type=&#x27;mobile&#x27;]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>{ &quot;type&quot;: &quot;mobile&quot;,  &quot;number&quot;: &quot;077 7700 1234&quot; }</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Select the mobile phone number</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Phone[type=&#x27;mobile&#x27;].number</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;077 7700 1234&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Select the office phone numbers - there are two of them!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Phone[type=&#x27;office&#x27;].number</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[ &quot;01962 001234&quot;,  &quot;01962 001235&quot; ]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Singleton array and value equivalence</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Within a JSONata expression or subexpression, any value (which is not itself an array) and an array containing just that value are deemed to be equivalent.  This allows the language to be composable such that location paths that extract a single value from and object and location paths that extract multiple values from arrays can both be used as inputs to other expressions without needing to use different syntax for the two forms.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Consider the following examples:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Address.City` returns the single value `&quot;Winchester&quot;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Phone[0].number` matches a single value, and returns that value `&quot;0203 544 1234&quot;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Phone[type=&#x27;home&#x27;].number` likewise matches the single value `&quot;0203 544 1234&quot;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Phone[type=&#x27;office&#x27;].number` matches two values, so returns an array `[ &quot;01962 001234&quot;,  &quot;01962 001235&quot; ]`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">When processing the return value of a JSONata expression, it might be desirable to have the results in a consistent format regardless of how many values were matched.  In the first two expressions above, it is clear that each expression is addressing a single value in the structure and it makes sense to return just that value.  In the last two expressions, however, it is not immediately obvious how many values will be matched, and it is not helpful if the host language has to process the results in different ways depending on what gets returned.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If this is a concern, then the expression can be modified to make it return an array even if only a single value is matched. This is done by adding empty square brackets `[]` to a step within the location path.  The examples above can be re-written to always return an array as follows:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Address[].City` returns `[ &quot;Winchester&quot;] `</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Phone[0][].number` returns `[ &quot;0203 544 1234&quot; ]`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Phone[][type=&#x27;home&#x27;].number` returns `[ &quot;0203 544 1234&quot; ]`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `Phone[type=&#x27;office&#x27;].number[]` returns `[ &quot;01962 001234&quot;,  &quot;01962 001235&quot; ]`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Note that the `[]` can be placed either side of the predicates and on any step in the path expression</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Wildcards</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Use of `*` instead of field name to select all fields in an object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Examples</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Select the values of all the fields of `Address`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Address.*</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[ &quot;Hursley Park&quot;, &quot;Winchester&quot;, &quot;SO21 2JN&quot; ]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Select the `Postcode` value of any child object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>*.Postcode</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;SO21 2JN&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Navigate arbitrary depths</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Descendant wildcard `**` instead of `*` will traverse all descendants (multi-level wildcard).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Examples</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Select all `Postcode` values, regardless of how deeply nested they are in the structure</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>**.Postcode</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[ &quot;SO21 2JN&quot;, &quot;E1 6RF&quot; ]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Manipulating data with functions and expressions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## String expressions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path expressions that point to a string value will return that value.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">String literals can also be created by enclosing the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sequence of characters in quotes. Either double quotes `&quot;` or single quotes `&#x27;` can be used, provided the same quote type is </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">used for the start and end of the string literal.  Single quote characters may be included within a double quoted string and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">_vice versa_ withought escaping.  Characters within the string literal may be escaped using the same format</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">as [JSON strings](https://tools.ietf.org/html/rfc7159#section-7).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Strings can be combined using the concatenation operator `&amp;`. This is an infix operator and will join the two strings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">returned by the expressions either side of it.  This is the only operator that will attempt to typecast its operands to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">the expected (string) type.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Concatenate `FirstName` followed by space followed by `Surname`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>FirstName &amp; &#x27; &#x27; &amp; Surname</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;Fred Smith&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Concatenates the `Street` and `City` from the `Address` object with a comma separator. Note the use of [parentheses](#parenthesized-expressions-and-blocks)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Address.(Street &amp; &#x27;, &#x27; &amp; City)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;Hursley Park, Winchester&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Casts the operands to strings, if necessary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5&amp;0&amp;true</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;50true&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Numeric expressions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Path expressions that point to a number value will return that value.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Numeric literals can also be created using the same syntax as [JSON numbers](https://tools.ietf.org/html/rfc7159#section-6).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Numbers can be combined using the usual mathematical operators to produce a resulting number.  Supported operators:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `+` addition</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `-` subtraction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `*` multiplication</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `/` division</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `%` remainder (modulo)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Consider the following JSON document:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>{&quot;Numbers&quot;: [1, 2.4, 3.5, 10, 20.9, 30]}</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Expression | Output | Comments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| ---------- | ------ |----|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[0] + Numbers[1]` | 3.4 |Adding 2 prices|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[0] - Numbers[4]` | -19.9 | Subtraction |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[0] * Numbers[5]` | 30 |Multiplying price by quantity|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[0] / Numbers[4]` | 0.04784688995215 |Division|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[2] % Numbers[5]` | 3.5 |Modulo operator|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Comparison expressions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Often used in predicates, for comparison of two values.  Returns Boolean `true` or `false`. Supported operators:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `=` equals</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `!=` not equals</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `&lt;` less than</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `&lt;=` less than or equal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `&gt;` greater than</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `&gt;=` greater than or equal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `in` value is contained in an array</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Expression | Output | Comments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| ---------- | ------ |----|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[0] = Numbers[5]` | false |Equality |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[0] != Numbers[4]` | true | Inequality |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[1] &lt; Numbers[5]` | true |Less than|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[1] &lt;= Numbers[5]` | true |Less than or equal|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[2] &gt; Numbers[4]` | false |Greater than|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `Numbers[2] &gt;= Numbers[4]` | false |Greater than or equal|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `&quot;01962 001234&quot; in Phone.number` | true | Value is contained in|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Boolean expressions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Used to combine Boolean results, often to support more sophisticated predicate expressions. Supported operators:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `and`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `or`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Note that `not` is supported as a function, not an operator.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Expression | Output | Comments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| ---------- | ------ |----|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `(Numbers[2] != 0) and (Numbers[5] != Numbers[1])` | true |`and` operator |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| `(Numbers[2] != 0) or (Numbers[5] = Numbers[1])` | true | `or` operator |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Building result structures</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">So far, we have discovered how to extract values from a JSON document, and how to manipulate the data using numeric, string and other operators.  It is useful to be able to specify how this processed data is presented in the output.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Array constructors</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">As previously observed, when a location path matches multiple values in the input document, these values are returned as an array.  The values might be objects or arrays, and as such will have their own structure, but the _matched values_ themselves are at the top level in the resultant array.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">It is possible to build extra structure into the resultant array by specifying the construction of arrays (or [objects](#object-constructors)) within the location path expression.  At any point in a location path where a field reference is expected, a pair of square brackets `[]` can be inserted to specify that the results of the expression within those brackets should be contained within a new array in the output.  Commas are used to separate multiple expressions within the array constructor.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Array constructors can also be used within location paths for making multiple selections without the broad brush use of wildcards.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- The four email addresses are returned in a flat array.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Email.address</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[
&quot;<a href="mailto:fred.smith@my-work.com" target="_blank" rel="noopener noreferrer">fred.smith@my-work.com</a>&quot;,
&quot;<a href="mailto:fsmith@my-work.com" target="_blank" rel="noopener noreferrer">fsmith@my-work.com</a>&quot;,
&quot;<a href="mailto:freddy@my-social.com" target="_blank" rel="noopener noreferrer">freddy@my-social.com</a>&quot;,
&quot;<a href="mailto:frederic.smith@very-serious.com" target="_blank" rel="noopener noreferrer">frederic.smith@very-serious.com</a>&quot;
]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Each email object generates an array of addresses.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Email.[address]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[
[ &quot;<a href="mailto:fred.smith@my-work.com" target="_blank" rel="noopener noreferrer">fred.smith@my-work.com</a>&quot;,  &quot;<a href="mailto:fsmith@my-work.com" target="_blank" rel="noopener noreferrer">fsmith@my-work.com</a>&quot; ],
[ &quot;<a href="mailto:freddy@my-social.com" target="_blank" rel="noopener noreferrer">freddy@my-social.com</a>&quot;, &quot;<a href="mailto:frederic.smith@very-serious.com" target="_blank" rel="noopener noreferrer">frederic.smith@very-serious.com</a>&quot; ]
]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Selects the `City` value of both `Address` and `Alternative.Address` objects.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[Address, Other.<code>Alternative.Address</code>].City</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>[ &quot;Winchester&quot;, &quot;London&quot; ]</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Object constructors</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">In a similar manner to the way arrays can be constructed, JSON objects can also be constructed in the output.  At any point in a location path where a field reference is expected, a pair of braces `{}` containing key/value pairs separated by commas, with each key and value separated by a colon: `{key1: value2, key2:value2}`.  The keys and values can either be literals or can be expressions. The key must either be a string or an expression that evaluates to a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">When an object constructor follows an expression that selects multiple values, the object constructor will create a single object that contains a key/value pair for each of those context values.  If an array of objects is required (one for each context value), then the object constructor should immediately follow the dot &#x27;.&#x27; operator.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Produces an array of objects (one for each phone).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Phone.{type: number}</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;home&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0203 544 1234&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;office&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001234&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;office&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001235&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;mobile&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;077 7700 1234&quot;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Combines the key/value pairs into a single object.  See <a href="#sorting-grouping">Grouping using object key expression</a> for more details.</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone{type: number}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"></code></pre>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;home&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0203 544 1234&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;office&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001234&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001235&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;mobile&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;077 7700 1234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Combines the key/value pairs into a single object.  In this case, for consistency, all numbers are grouped into arrays. See <a href="#singleton-array-and-value-equivalence">Singleton array and value equivalence</a> for more details.</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Phone{type: number[]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"></code></pre>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;home&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0203 544 1234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;office&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001234&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001235&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;mobile&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;077 7700 1234&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="json-literals">JSON literals<a href="#json-literals" class="hash-link" aria-label="Direct link to JSON literals" title="Direct link to JSON literals">​</a></h2>
<p>The array and object constructors use the standard JSON syntax for JSON arrays and JSON objects.  In addition to this values of the other JSON data types can be entered into an expression using their native JSON syntax:</p>
<ul>
<li>strings - <code>&quot;hello world&quot;</code></li>
<li>numbers - <code>34.5</code></li>
<li>Booleans - <code>true</code> or <code>false</code></li>
<li>nulls - <code>null</code></li>
<li>objects - <code>{&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;}</code></li>
<li>arrays - <code>[&quot;value1&quot;, &quot;value2&quot;]</code></li>
</ul>
<p><strong>JSONata is a superset of JSON.</strong> This means that any valid JSON document is also a valid JSONata expression.  This property allows you to use a JSON document as a template for the desired output, and then replace parts of it with expressions to insert data into the output from the input document.</p>
<h1>Query composition</h1>
<p>In JSONata, everything is an <em>expression</em>. An expression comprises <em>values</em>, <em>functions</em> and <em>operators</em> which, when <em>evaluated</em>, produces a resulting value.  Functions and operators are applied to values which themselves can be the results of evaluating sub-expressions. In that way, the language is fully <em>composable</em> to any level of complexity.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="parenthesized-expressions-and-blocks">Parenthesized expressions and blocks<a href="#parenthesized-expressions-and-blocks" class="hash-link" aria-label="Direct link to Parenthesized expressions and blocks" title="Direct link to Parenthesized expressions and blocks">​</a></h2>
<p>Used to override the operator precedence rules.  E.g.</p>
<ul>
<li><code>(5 + 3) * 4</code></li>
</ul>
<p>Used to compute complex expressions on a context value</p>
<ul>
<li><code>Product.(Price * Quantity)</code> - both Price and Quantity are properties of the Product object</li>
</ul>
<p>Used to support &#x27;code blocks&#x27; - multiple expressions, separated by semicolons</p>
<ul>
<li><code>(expr1; expr2; expr3)</code></li>
</ul>
<p>Each expression in the block is evaluated <em>in sequential order</em>; the result of the last expression is returned from the block.</p>
<h1>Sorting, Grouping and Aggregation</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sorting">Sorting<a href="#sorting" class="hash-link" aria-label="Direct link to Sorting" title="Direct link to Sorting">​</a></h2>
<p>Arrays contain an ordered collection of values.  If you need to re-order the values, then the array must be sorted.  In JSONata, there are two ways of sorting an array:</p>
<ol>
<li>
<p>Using the <a href="#sort"><code>$sort()</code></a> function.</p>
</li>
<li>
<p>Using the <a href="#order-by-">order-by</a> operator.</p>
</li>
</ol>
<p>The <a href="#order-by-">order-by</a> operator is a convenient syntax that can used directly in a path expression to sort the result sequences in ascending or descending order.  The <a href="#sort"><code>$sort()</code></a> function requires more syntax to be written, but is more flexible and supports custom comparator functions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="grouping">Grouping<a href="#grouping" class="hash-link" aria-label="Direct link to Grouping" title="Direct link to Grouping">​</a></h2>
<p>The JSONata <a href="#object-constructors">object constructor</a> syntax allows you to specify an expression for the key in any key/value pair (the value can obviously be an expression too). The key expression must evaluate to a string since this is a restriction on JSON objects.  The key and value expressions are evaluated for each item in the input context (see <a href="#the-jsonata-processing-model">processing model</a>). The result of each key/value expression pair is inserted into the resulting JSON object.</p>
<p>If the evaluation of any key expression results in a key that is already in the result object, then the result of its associated value expression will be grouped with the value(s) already associated with that key. Note that the value expressions are not evaluated until all of the grouping has been performed.  This allows for aggregation expressions to be evaluated over the collection of items for each group.</p>
<p><strong>Examples</strong></p>
<ul>
<li>
<p>Group all of the product sales by name, with the price of each item in each group</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product{`Product Name`: Price}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"></code></pre>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Bowler Hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">34.45</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">34.45</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Trilby hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21.67</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Cloak&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">107.99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Group all of the product sales by name, with the price and the quantity of each item in each group</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Product Name`: {&quot;Price&quot;: Price, &quot;Qty&quot;: Quantity}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;Bowler Hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">34.45</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">34.45</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;Trilby hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21.67</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;Cloak&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">107.99</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note in the above example, the value expression grouped all of the prices together and all of the quantities together into separate arrays.  This is because the context value is the sequence of all grouped Products and the <code>Price</code> expression will select all prices from all products.  If you want to collect the price and quantity into individual objects, then you need to evaluate the object constructor <em>for each</em> product in the context sequence.  The following example shows this.</p>
<ul>
<li>
<p>Explicit use of <code>$.{ ... }</code> to create an object for each item in the group.</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Product Name`: $.{&quot;Price&quot;: Price, &quot;Qty&quot;: Quantity}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;Bowler Hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">34.45</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">34.45</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;Trilby hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21.67</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;Cloak&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;Price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">107.99</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;Qty&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Multiply the Price by the Quantity for each product in each group</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product{`Product Name`: $.(Price*Quantity)}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"></code></pre>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Bowler Hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">68.9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">137.8</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Trilby hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21.67</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Cloak&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">107.99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>The total aggregated value in each group</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product{`Product Name`: $sum($.(Price*Quantity))}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"></code></pre>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Bowler Hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">206.7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Trilby hat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21.67</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Cloak&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">107.99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation">Aggregation<a href="#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">​</a></h2>
<p>Often queries are just required to return aggregated results from a set of matching values.  A number of aggregation functions are available which return a single aggregated value when applied to an array of values.</p>
<p><strong>Examples</strong></p>
<ul>
<li>
<p>Total price of each product in each order</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$sum(Account.Order.Product.Price)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">198.56</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>More likely want to add up the total of the price times quantity for each order</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$sum(Account.Order.Product.(Price*Quantity))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">336.36</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>Other <a href="#aggregation-functions">numeric aggregation functions</a> are available (i.e. average, min, max) and an <a href="#join">aggregator for strings</a>.  It is also possible to write complex custom aggregators using the <a href="#reduce"><code>$reduce()</code></a> higher-order function.</p>
<h1>The JSONata processing model</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-jsonata-type-system">The JSONata type system<a href="#the-jsonata-type-system" class="hash-link" aria-label="Direct link to The JSONata type system" title="Direct link to The JSONata type system">​</a></h2>
<p>JSONata is a superset of JSON and the JSONata type system is a superset of the JSON data types.  In common with all functional programming languages, the function is also a first-class data type.  The following data types are supported by JSONata:</p>
<ul>
<li>string</li>
<li>number</li>
<li>Boolean</li>
<li>null</li>
<li>object</li>
<li>array</li>
<li>function</li>
</ul>
<p>All but the last one are in common with JSON.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sequences">Sequences<a href="#sequences" class="hash-link" aria-label="Direct link to Sequences" title="Direct link to Sequences">​</a></h2>
<p>JSONata has been designed foremost as a query language, whereby a path expression can select zero, one or more than one values from the JSON document.  These values, each of which can be of any of the types listed above, are returned as a <em>result sequence</em>.  During the evaluation of expressions, which involves the results of subexpressions being combined or becoming the context inputs to other subexpressions, the sequences are subject to the process of <em>sequence flattening</em>.</p>
<p>The sequence flattening rules are as follows:</p>
<ol>
<li>
<p>An <strong>empty sequence</strong> is a sequence with no values and is considered to be &#x27;nothing&#x27; or &#x27;no match&#x27;.  It won&#x27;t appear in the output of any expression. If it is associated with an object property (key/value) pair in a result object, then that object will not have that property.</p>
</li>
<li>
<p>A <strong>singleton sequence</strong> is a sequence containing a single value.  It is considered equivalent to that value itself, and the output from any expression, or sub-expression will be that value without any surrounding structure.</p>
</li>
<li>
<p>A sequence containing more than one value is represented in the output as a JSON array.  This is still internally flagged as a sequence and subject to the next rule.  Note that if an expression matches an array from the input JSON, or a JSON array is explicitly constructed in the query using the <a href="#array-constructors">array constructor</a>, then this remains an array of values rather than a sequence of values and will not be subject to the sequence flattening rules.  However, if this array becomes the context of a subsequent expression, then the result of that <em>will</em> be a sequence.</p>
</li>
<li>
<p>If a sequence contains one or more (sub-)sequences, then the values from the sub-sequence are pulled up to the level of the outer sequence.  A result sequence will never contain child sequences (they are flattened).</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="jsonata-path-processing">JSONata path processing<a href="#jsonata-path-processing" class="hash-link" aria-label="Direct link to JSONata path processing" title="Direct link to JSONata path processing">​</a></h2>
<p>The JSONata path expression is a <em>declarative functional</em> language.</p>
<p><strong>Functional</strong> because it is based on the map/filter/reduce programming paradigm as supported by popular functional programming languages through the use of higher-order functions.</p>
<p><strong>Declarative</strong> because these higher-order functions are exposed through a lightweight syntax which lets the user focus on the intention of the query (declaration) rather than the programming constructs that control their evaluation.</p>
<p>A path expression is a sequence of one or more of the following functional stages:</p>
<table><thead><tr><th>Stage</th><th>Syntax</th><th>Action</th></tr></thead><tbody><tr><td><strong>Map</strong></td><td>seq<code>.</code>expr</td><td>Evaluates the RHS expression in the context of each item in the input sequence.  Flattens results into result sequence.</td></tr><tr><td><strong>Filter</strong></td><td>seq<code>[</code>expr<code>]</code></td><td>Filter results from previous stage by applying predicate expression between brackets to each item.</td></tr><tr><td><strong>Sort</strong></td><td>seq<code>^(</code>expr<code>)</code></td><td>Sorts (re-orders) the input sequence according to the criteria in parentheses.</td></tr><tr><td><strong>Index</strong></td><td>seq<code>#</code>$var</td><td>Binds a named variable to the current context position (zero offset) in the sequence.</td></tr><tr><td><strong>Join</strong></td><td>seq<code>@</code>$var</td><td>Binds a named variable to the current current context item in the sequence.  Can only be used directly following a map stage.</td></tr><tr><td><strong>Reduce</strong></td><td>seq<code>{</code> expr<code>:</code>expr<code>,</code> expr<code>:</code>expr ...<code>}</code></td><td>Group and aggregate the input sequence to a single result object as defined by the name/value expressions.  Can only appear as the final stage in a path expression.</td></tr></tbody></table>
<p>In the above table:</p>
<ul>
<li>In the &#x27;Syntax&#x27; column, &#x27;seq&#x27; refers to the input sequence for the current stage, which is the result sequence from the previous stage.</li>
<li>The &#x27;Action&#x27; column gives a brief outline of the stage&#x27;s behavior; fuller details are in the <a href="#path-operators">Path Operators</a> reference page.</li>
<li>The relative precedence of each operator affects the scope of its influence on the input sequence. Specifically,<!-- -->
<ul>
<li>The Filter operator binds tighter than the Map operator.  This means, for example, that <code>books.authors[0]</code> will select the all of the first authors from <em>each</em> book rather than the first author from all of the books.</li>
<li>The Sort (order-by) operator has the lowest precedence, meaning that the full path to the left of it will be evaluated, and its result sequence will be sorted.</li>
<li>This operator precedence can be overridden by using parentheses.  For example, <code>(books.authors)[0]</code> will select the the first author from all of the books (single value).  Note, however, that parentheses also define a scope frame for variables, so any variables that have been bound within the parentheses block including those bound by the <code>@</code> and <code>#</code> operators will go out of scope at the end of the parens block.</li>
</ul>
</li>
<li>The variables bound by the <code>@</code> and <code>#</code> operators go out of scope at the end of the path expression.<!-- -->
<ul>
<li>The Reduce stage, if used, will terminate the current path expression.  Although a Map operator can immediately follow this, it will be interpreted as the start of a new path expression, meaning that any previously bound context or index variables will be out of scope.</li>
</ul>
</li>
</ul>
<h1>Functional programming constructs</h1>
<p>So far, we have introduced all the parts of the language that allow us to extract data from an input JSON document, combine the data using string and numeric operators, and format the structure of the output JSON document.  What follows are the parts that turn this into a Turing complete, functional programming language.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comments">Comments<a href="#comments" class="hash-link" aria-label="Direct link to Comments" title="Direct link to Comments">​</a></h2>
<p>JSONata expressions can be interleaved with comments using &#x27;C&#x27; style comment delimeters.  For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/* Long-winded expressions might need some explanation */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $pi := 3.1415926535897932384626;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* JSONata is not known for its graphics support! */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $plot := function($x) {(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $floor := $string ~&gt; $substringBefore(?, &#x27;.&#x27;) ~&gt; $number;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $index := $floor(($x + 1) * 20 + 0.5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $join([0..$index].(&#x27;.&#x27;)) &amp; &#x27;O&#x27; &amp; $join([$index..40].(&#x27;.&#x27;))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  )};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* Factorial is the product of the integers 1..n */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $product := function($a, $b) { $a * $b };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial := function($n) { $n = 0 ? 1 : $reduce([1..$n], $product) };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $sin := function($x){ /* define sine in terms of cosine */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $cos($x - $pi/2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $cos := function($x){ /* Derive cosine by expanding Maclaurin series */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $x &gt; $pi ? $cos($x - 2 * $pi) : $x &lt; -$pi ? $cos($x + 2 * $pi) :</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      $sum([0..12].($power(-1, $) * $power($x, 2*$) / $factorial(2*$)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [0..24].$sin($*$pi/12).$plot($)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Produces <a href="http://try.jsonata.org/ryYn78Q0m" target="_blank" rel="noopener noreferrer">this</a>, if you&#x27;re interested!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conditional-logic">Conditional logic<a href="#conditional-logic" class="hash-link" aria-label="Direct link to Conditional logic" title="Direct link to Conditional logic">​</a></h2>
<p>If/then/else constructs can be written using the ternary operator &quot;? :&quot;.</p>
<p><code>predicate ? expr1 : expr2</code></p>
<p>The expression <code>predicate</code> is evaluated.  If its effective boolean value (see definition) is <code>true</code> then <code>expr1</code> is evaluated and returned, otherwise <code>expr2</code> is evaluated and returned.</p>
<p><strong>Examples</strong></p>
<p>TBD</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="variables">Variables<a href="#variables" class="hash-link" aria-label="Direct link to Variables" title="Direct link to Variables">​</a></h2>
<p>Any name that starts with a dollar &#x27;$&#x27; is a variable.  A variable is a named reference to a value.  The value can be one of any type in the language&#x27;s <a href="#the-jsonata-type-system">type system</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-variables">Built-in variables<a href="#built-in-variables" class="hash-link" aria-label="Direct link to Built-in variables" title="Direct link to Built-in variables">​</a></h3>
<ul>
<li><code>$</code> The variable with no name refers to the context value at any point in the input JSON hierarchy. Examples</li>
<li><code>$$</code> The root of the input JSON.  Only needed if you need to break out of the current context to temporarily navigate down a different path.  E.g. for cross-referencing or joining data. Examples</li>
<li>Native (built-in) functions.  See function library.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="variable-binding">Variable binding<a href="#variable-binding" class="hash-link" aria-label="Direct link to Variable binding" title="Direct link to Variable binding">​</a></h3>
<p>Values (of any type in the type system) can be bound to variables</p>
<p><code>$var_name := &quot;value&quot;</code></p>
<p>The stored value can be later referenced using the expression <code>$var_name</code>.</p>
<p>The scope of a variable is limited to the &#x27;block&#x27; in which it was bound.  E.g.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Invoice.(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $p := Product.Price;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $q := Product.Quantity;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $p * $q</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Returns Price multiplied by Quantity for the Product in the Invoice.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2>
<p>The function is a first-class type, and can be stored in a variable just like any other data type.  A library of built-in functions is provided (link) and assigned to variables in the global scope.  For example, <code>$uppercase</code> contains a function which, when invoked with a string argument, <code>str</code>, will return a string with all the characters in <code>str</code> changed to uppercase.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="invoking-a-function">Invoking a function<a href="#invoking-a-function" class="hash-link" aria-label="Direct link to Invoking a function" title="Direct link to Invoking a function">​</a></h3>
<p>A function is invoked by following its reference (or definition) by parentheses containing a comma delimited sequence of arguments.</p>
<p><strong>Examples</strong></p>
<ul>
<li><code>$uppercase(&quot;Hello&quot;)</code> returns the string &quot;HELLO&quot;.</li>
<li><code>$substring(&quot;hello world&quot;, 0, 5)</code> returns the string &quot;hello&quot;</li>
<li><code>$sum([1,2,3])</code> returns the number 6</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="defining-a-function">Defining a function<a href="#defining-a-function" class="hash-link" aria-label="Direct link to Defining a function" title="Direct link to Defining a function">​</a></h3>
<p>Anonymous (lambda) functions can be defined using the following syntax:</p>
<p><code>function($l, $w, $h){ $l * $w * $h }</code></p>
<p>and can be invoked using</p>
<p><code>function($l, $w, $h){ $l * $w * $h }(10, 10, 5)</code> which returns 500</p>
<p>The function can also be assigned to a variable for future use (within the block)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $volume := function($l, $w, $h){ $l * $w * $h };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $volume(10, 10, 5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-signatures">Function signatures<a href="#function-signatures" class="hash-link" aria-label="Direct link to Function signatures" title="Direct link to Function signatures">​</a></h3>
<p>Functions can be defined with an optional signature which specifies the parameter types of the function.  If supplied,
the evaluation engine will validate the arguments passed to the function before it is invoked.  A dynamic error is
thown if the argument list does not match the signature.</p>
<p>A function signature is a string of the form <code>&lt;params:return&gt;</code>. <code>params</code> is a sequence of type symbols, each one representing an input argument&#x27;s type. <code>return</code> is a single type symbol representing the return value type.</p>
<p>Type symbols work as follows:</p>
<p>Simple types:</p>
<ul>
<li><code>b</code> - Boolean</li>
<li><code>n</code> - number</li>
<li><code>s</code> - string</li>
<li><code>l</code> - <code>null</code></li>
</ul>
<p>Complex types:</p>
<ul>
<li><code>a</code> - array</li>
<li><code>o</code> - object</li>
<li><code>f</code> - function</li>
</ul>
<p>Union types:</p>
<ul>
<li><code>(sao)</code> - string, array or object</li>
<li><code>(o)</code> - same as <code>o</code></li>
<li><code>u</code> - equivalent to <code>(bnsl)</code> i.e. Boolean, number, string or <code>null</code></li>
<li><code>j</code> - any JSON type. Equivalent to <code>(bnsloa)</code> i.e. Boolean, number, string, <code>null</code>, object or array, but not function</li>
<li><code>x</code> - any type. Equivalent to <code>(bnsloaf)</code></li>
</ul>
<p>Parametrised types:</p>
<ul>
<li><code>a&lt;s&gt;</code> - array of strings</li>
<li><code>a&lt;x&gt;</code> - array of values of any type</li>
</ul>
<p>Some examples of signatures of built-in JSONata functions:</p>
<ul>
<li><code>$count</code> has signature <code>&lt;a:n&gt;</code>; it accepts an array and returns a number.</li>
<li><code>$append</code> has signature <code>&lt;aa:a&gt;</code>; it accepts two arrays and returns an array.</li>
<li><code>$sum</code> has signature <code>&lt;a&lt;n&gt;:n&gt;</code>; it accepts an array of numbers and returns a number.</li>
<li><code>$reduce</code> has signature <code>&lt;fa&lt;j&gt;:j&gt;</code>; it accepts a reducer function <code>f</code> and an <code>a&lt;j&gt;</code> (array of JSON objects) and returns a JSON object.</li>
</ul>
<p>Each type symbol may also have <em>options</em> applied.</p>
<ul>
<li><code>+</code> - one or more arguments of this type<!-- -->
<ul>
<li>E.g. <code>$zip</code> has signature <code>&lt;a+&gt;</code>; it accepts one array, or two arrays, or three arrays, or...</li>
</ul>
</li>
<li><code>?</code> - optional argument<!-- -->
<ul>
<li>E.g. <code>$join</code> has signature <code>&lt;a&lt;s&gt;s?:s&gt;</code>; it accepts an array of strings and an optional joiner string which defaults to the empty string. It returns a string.</li>
</ul>
</li>
<li><code>-</code> - if this argument is missing, use the context value (&quot;focus&quot;).<!-- -->
<ul>
<li>E.g. <code>$length</code> has signature <code>&lt;s-:n&gt;</code>; it can be called as <code>$length(OrderID)</code> (one argument) but equivalently as <code>OrderID.$length()</code>.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recursive-functions">Recursive functions<a href="#recursive-functions" class="hash-link" aria-label="Direct link to Recursive functions" title="Direct link to Recursive functions">​</a></h3>
<p>Functions that have been assigned to variables can invoke themselves using that variable reference.  This allows recursive functions to be defined.  Eg.</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial:= function($x){ $x &lt;= 1 ? 1 : $x * $factorial($x-1) };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial(4)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Result</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">24</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that it is actually possible to write a recursive function using purely anonymous functions (i.e. nothing gets assigned to variables).  This is done using the <a href="https://en.wikipedia.org/wiki/Fixed-point_combinator#Fixed_point_combinators_in_lambda_calculus" target="_blank" rel="noopener noreferrer">Y-combinator</a> which might be an interesting <a href="#advanced-example-the-y-combinator">diversion</a> for those interested in functional programming.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tail-call-optimization-tail-recursion">Tail call optimization (Tail recursion)<a href="#tail-call-optimization-tail-recursion" class="hash-link" aria-label="Direct link to Tail call optimization (Tail recursion)" title="Direct link to Tail call optimization (Tail recursion)">​</a></h3>
<p>A recursive function adds a new frame to the call stack each time it invokes itself.  This can eventually lead to stack exhaustion if the function recuses beyond a certain limit.  Consider the classic recursive implementation of the factorial function</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial := function($x) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $x &lt;= 1 ? 1 : $x * $factorial($x-1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial(170)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function works by pushing the number onto the stack, then when the stack unwinds, multiplying it by the result of the factorial of the number minus one.  Written in this way, the JSONata evaluator has no choice but to use the call stack to store the intermediate results.  Given a large enough number, the call stack will overflow.</p>
<p>This is a recognised problem with functional programming and the solution is to rewrite the function slightly to avoid the <em>need</em> for the stack to store the itermediate result.  The following implementation of factorial achieves this</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial := function($x){(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $iter := function($x, $acc) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      $x &lt;= 1 ? $acc : $iter($x - 1, $x * $acc)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $iter($x, 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  )};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $factorial(170)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, the multiplication is done <em>before</em> the function invokes itself and the intermediate result is carried in the second parameter <code>$acc</code> (accumulator).  The invocation of itself is the <em>last</em> thing that the function does.  This is known as a &#x27;tail call&#x27;, and when the JSONata parser spots this, it internally rewrites the recursion as a simple loop.  Thus it can run indefinitely without growing the call stack.  Functions written in this way are said to be <a href="https://en.wikipedia.org/wiki/Tail_call" target="_blank" rel="noopener noreferrer">tail recursive</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="higher-order-functions">Higher order functions<a href="#higher-order-functions" class="hash-link" aria-label="Direct link to Higher order functions" title="Direct link to Higher order functions">​</a></h3>
<p>A function, being a first-class data type, can be passed as a parameter to another function, or returned from a function.  Functions that process other functions are known as higher order functions.  Consider the following example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $twice := function($f) { function($x){ $f($f($x)) } };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $add3 := function($y){ $y + 3 };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $add6 := $twice($add3);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $add6(7)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>The function stored in variable <code>$twice</code> is a higher order function.  It takes a parameter <code>$f</code> which is a function, and returns a function which takes a parameter <code>$x</code> which, when invoked, applies the function <code>$f</code> twice to <code>$x</code>.</li>
<li><code>$add3</code> stores a function that adds 3 to its argument.  Neither <code>$twice</code> or <code>$add3</code> have been invoked yet.</li>
<li><code>$twice</code> is invoked by passing the function <code>add3</code> as its argument.  This returns a function that applies <code>$add3</code> twice to <em>its</em> argument.  This returned function is not invoked yet, but rather assigned to the variable <code>add6</code>.</li>
<li>Finally the function in <code>$add6</code> is invoked with the argument 7, resulting in 3 being added to it twice.  It returns 13.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functions-are-closures">Functions are closures<a href="#functions-are-closures" class="hash-link" aria-label="Direct link to Functions are closures" title="Direct link to Functions are closures">​</a></h3>
<p>When a lambda function is defined, the evaluation engine takes a snapshot of the environment and stores it with the function body definition.  The environment comprises the context item (i.e. the current value in the location path) together with the current in-scope variable bindings.  When the lambda function is later invoked, it is done so in that stored environment rather than the current environment at invocation time.  This property is known as <em>lexical scoping</em> and is a fundamental property of <em>closures</em>.</p>
<p>Consider the following example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $AccName := function() { $.&#x27;Account Name&#x27; };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Order[OrderID = &#x27;order104&#x27;].Product.{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &#x27;Account&#x27;: $AccName(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &#x27;SKU-&#x27; &amp; $string(ProductID): $.&#x27;Product Name&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When the function is created, the context item (referred to by &#x27;$&#x27;) is the value of <code>Account</code>.  Later, when the function is invoked, the context item has moved down the structure to the value of each <code>Product</code> item.  However, the function body is invoked in the environment that was stored when it was defined, so its context item is the value of <code>Account</code>.  This is a somewhat contrived example, you wouldn&#x27;t really need a function to do this.  The expression produces the following result:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Account&quot;: &quot;Firefly&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;SKU-858383&quot;: &quot;Bowler Hat&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;SKU-345664&quot;: &quot;Cloak&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="partial-function-application">Partial function application<a href="#partial-function-application" class="hash-link" aria-label="Direct link to Partial function application" title="Direct link to Partial function application">​</a></h3>
<p>Functions can <a href="https://en.wikipedia.org/wiki/Partial_application" target="_blank" rel="noopener noreferrer">partially applied</a> by invoking the function with one or more (but not all)
arguments replaced by a question mark <code>?</code> placeholder.  The result of this is another function whose arity (number of parameters) is reduced
by the number of arguments supplied to the original function.  This returned function can be treated like any other newly defined function,
e.g. bound to a variable, passed to a higher-order function, etc.</p>
<p><strong>Examples</strong></p>
<ul>
<li>
<p>Create a function to return the first five characters of a string by partially applying the <code>$substring</code> function</p>
<p><strong>Query</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$first5 := $substring(?, 0, 5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$first5(&quot;Hello, World&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;Hello&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Partially applied function can be further partially applied</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(
$firstN := $substring(?, 0, ?);
$first5 := $firstN(?, 5);
$first5(&quot;Hello, World&quot;)
)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;Hello&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Function chaining</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Function chaining can be used in two ways:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1. To avoid lots of nesting when multiple functions are applied to a value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2. As a higher-order construct for defining new functions by combining existing functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Invocation chaining</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`value ~&gt; $funcA ~&gt; $funcB`\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">is equivalent to\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$funcB($funcA(value))`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Customer.Email ~&gt; $substringAfter(&quot;@&quot;) ~&gt; $substringBefore(&quot;.&quot;) ~&gt; $uppercase()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Function composition</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Function composition](https://en.wikipedia.org/wiki/Function_composition) is the application of one function to another function</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">to produce a third function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$funcC := $funcA ~&gt; $funcB`\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">is equivalent to\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$funcC := function($arg) { $funcB($funcA($arg)) }`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Create a new function by chaining two existing functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(
$normalize := $uppercase ~&gt; $trim;
$normalize(&quot;   Some   Words   &quot;)
)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;SOME WORDS&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Functions as first class values</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Function composition can be combined with partial function application to produce a very compact syntax for defining new</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">functions.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Create a new function by chaining two partially evaluated functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(
$first5Capitalized := $substring(?, 0, 5) ~&gt; $uppercase(?);
$first5Capitalized(Address.City)
)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>&quot;WINCH&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Advanced example - The Y-combinator</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">There is no need to read this section - it will do nothing for your sanity or ability to manipulate JSON data.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Earlier we learned how to write a recursive function to calculate the factorial of a number and hinted that this could be done without naming any functions.  We can take higher-order functions to the extreme and write the following:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`λ($f) { λ($x) { $x($x) }( λ($g) { $f( (λ($a) {$g($g)($a)}))})}(λ($f) { λ($n) { $n &lt; 2 ? 1 : $n * $f($n - 1) } })(6)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">which produces the result `720`.  The Greek lambda (λ) symbol can be used in place of the word `function` which, if you can find it on your keyboard, will save screen space and please the fans of [lambda calculus](https://en.wikipedia.org/wiki/Lambda_calculus).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The first part of this above expression is an implementation of the [Y-combinator](https://en.wikipedia.org/wiki/Fixed-point_combinator#Fixed_point_combinators_in_lambda_calculus) in this language.  We could assign it to a variable and apply it to other recursive anonymous functions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $Y </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= λ($f) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> λ($x) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> $x($x) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">( λ($g) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> $f( (λ($a) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">$g($g)($a)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">))</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> . $Y(λ($f) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> λ($n) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> $n &lt;= </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> ? $n </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $f($n</span><span class="token number" style="color:rgb(247, 140, 108)">-1</span><span class="token plain">) + $f($n</span><span class="token number" style="color:rgb(247, 140, 108)">-2</span><span class="token plain">) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">) ($)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to produce the Fibonacci series <code>[ 1, 1, 2, 3, 5, 8, 13, 21, 34 ]</code>.</p>
<p>But we don&#x27;t need to do any of this.  Far more sensible to use named functions:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $fib := λ($n) { $n &lt;= 1 ? $n : $fib($n-1) + $fib($n-2) };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [1,2,3,4,5,6,7,8,9] . $fib($)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Using Regular Expressions</h1>
<p>The regular expression is a syntax for matching and extracting parts of a string.  JSONata provides first class support for regular expressions surrounded by the familiar slash delimeters found in many scripting languages.</p>
<p><code>/regex/flags</code></p>
<p>where:</p>
<ul>
<li><code>regex</code> - the regular expression</li>
<li><code>flags</code> - optionally either or both of:<!-- -->
<ul>
<li><code>i</code> - ignore case</li>
<li><code>m</code> - multiline match</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions-which-use-regular-expressions">Functions which use regular expressions<a href="#functions-which-use-regular-expressions" class="hash-link" aria-label="Direct link to Functions which use regular expressions" title="Direct link to Functions which use regular expressions">​</a></h2>
<p>A number of functions are available that take a regular expression as a parameter</p>
<ul>
<li><a href="#match">$match()</a></li>
<li><a href="#contains">$contains()</a></li>
<li><a href="#split">$split()</a></li>
<li><a href="#replace">$replace()</a></li>
</ul>
<p><strong>Examples</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="regular-expressions-in-query-predicates">Regular expressions in query predicates<a href="#regular-expressions-in-query-predicates" class="hash-link" aria-label="Direct link to Regular expressions in query predicates" title="Direct link to Regular expressions in query predicates">​</a></h2>
<p>Regexes are often used in query predicates (filter expressions) when selecting objects that contain a matching string property.  For this, a short cut notation can be used as follows:</p>
<p><code>path.to.object[stringProperty ~&gt; /regex/]</code></p>
<p>The <code>~&gt;</code> is the <a href="#chain">chain operator</a>, and its use here implies that the result of <code>/regex/</code> is a function.  We&#x27;ll see below that this is in fact the case.</p>
<p><strong>Examples</strong></p>
<p><code>Account.Order.Product[`Product Name` ~&gt; /hat/i ]</code></p>
<p>will match all products that have &#x27;hat&#x27; in their name.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="generic-matchers">Generic matchers<a href="#generic-matchers" class="hash-link" aria-label="Direct link to Generic matchers" title="Direct link to Generic matchers">​</a></h2>
<p>The JSONata type system is based on the JSON type system, with the addition of the function type.  In order to accommodate the regex as a standalone expression, the syntax <code>/regex/</code> evaluates to a function.  Think of the <code>/regex/</code> syntax as a higher-order function that results in a &#x27;matching function&#x27; when evaluated.  The <code>regex</code> between the slashes is the parameter to this HOF and the function that gets returned, when applied to <em>its</em> string parameter, will return a structure that contains details of parts of the string that have been matched.  If nothing is matched, then it returns the empty sequence (i.e. JavaScript <code>undefined</code>).</p>
<p><strong>Example</strong></p>
<p><code>$matcher := /[a-z]*an[a-z]*/i</code></p>
<p>Evaluation of the regex returns a function, and this has been bound to a variable <code>$matcher</code>.  Later, the <code>$matcher</code> function is invoked on a string:</p>
<p><code>$matcher(&#x27;A man, a plan, a canal, Panama!&#x27;)</code></p>
<p>This returns the following JSONata object (JSON, but also with a function property):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">```json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;match&quot;: &quot;man&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;start&quot;: 2,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;end&quot;: 4,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;groups&quot;: [],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;next&quot;: &quot;&lt;native function&gt;#0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This contains information of the first matching substring within this famous palindrome, specifically:</p>
<ul>
<li><code>match</code> - the substring within the original string that matches the regex</li>
<li><code>start</code> - the starting position (zero offset) of the matching substring within the original string</li>
<li><code>end</code> - the endinging position of the matching substring within the original string</li>
<li><code>groups</code> - if capturing groups are used in the regex, then this array contains a string for the text captured by each group</li>
<li><code>next()</code> - when invoked, will return details of the second occurrence of any matching substring (and so on).</li>
</ul>
<p>In this example, invoking <code>next()</code> will return:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;match&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;canal&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;start&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">17</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;end&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;groups&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;next&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;native function&gt;#0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">and so on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> until it eventually returns the empty sequence.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ## Writing a custom matcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">We&#x27;ve learned that the regex syntax is just a function generator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and the signature and return structure of the generated &#x27;matcher&#x27; function is well defined.  The four regex-aware functions (`$match`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> `$contain`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> `$split`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> `$replace`) simply invoke this function as part of their implementation.  Apart from that</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> they have no awareness that these matcher functions were generated by the regex syntax.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">So it&#x27;s possible to write any user-defined matcher function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> provided it conforms to this contract.  This can be done as a JSONata lambda function or (more likely) as an extension function.  It can then be passed to these four &#x27;regex-aware&#x27; functions and they will search using the custom matcher rather than a regex.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Date/Time processing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## The &#x27;evaluation time’ - $now()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">There are two functions that return the &#x27;current&#x27; date/time timestamp</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">. </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`$now()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#now) returns the timestamp in an ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token plain"> formatted string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">. </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`$millis()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#millis) returns the same timestamp as the number of milliseconds since midnight on 1st January </span><span class="token number" style="color:rgb(247, 140, 108)">1970</span><span class="token plain"> UTC (the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Unix epoch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//en.wikipedia.org/wiki/Unix_time)).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The timestamp is captured at the start of the expression evaluation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and that same timestamp value is returned for every occurrence of `$now()` and `$millis()` in the same expression for the duration of the evaluation.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- The timestamp will be the same for all invocations within an expression</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;invoiceTime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $now()</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;total&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $sum(Account.Order.Product.(Price * Quantity))</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;closingTime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $now()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;invoiceTime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2018-12-10T13:49:51.141Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;total&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">336.36</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;closingTime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2018-12-10T13:49:51.141Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## JSON and ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">JSON does not have a built-in type for date/time values.  The general </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">consensus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//stackoverflow.com/a/15952652/7079134) is to store the date/time value as a string in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;myDateTime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2018-12-10T13:45:00.000Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">JSONata follows this convention and provides functions for formatting and parsing ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token plain"> formatted timestamps </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`toMillis()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#tomillis) and </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`fromMillis()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#frommillis))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Support for other date/time formats</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Since there is no standard for date/time format in JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it is entirely possible that the JSON data you are working with will have date/time values formatted in other ways.  JSONata supports the highly versatile picture string notation from the XPath/XQuery </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">format-dateTime()</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.w3.org/TR/xpath-functions-31/#func-format-dateTime) specification for both the formatting and parsing of a wide variety of date/time formats. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">See </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`toMillis()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#tomillis) and </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`fromMillis()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#frommillis) for details.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- The date `</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">2018</span><span class="token plain">` in US format and `</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">2018</span><span class="token plain">` in European format both refer to the same day.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $toMillis(&#x27;</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">2018</span><span class="token plain">&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">D</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">M</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;) ~&gt; $fromMillis(&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">M</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">D</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;12/10/2018&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- More verbose format.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $toMillis(&#x27;</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">2018</span><span class="token plain">&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">D</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">M</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;) </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       ~&gt; $fromMillis(&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">FNn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">D1o</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">MNn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">YI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Monday, 10th December MMXVIII&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Path Operators</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The path operators underpin the declarative nature of the map/filter/reduce processing model in JSONata.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `.` (Map)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The dot operator is one of the fundamental building blocks in JSONata expressions.  It implements the &#x27;for each&#x27; or &#x27;map&#x27; function that is common in many functional languages.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The dot operator performs the following logic</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- The expression on the LHS is evaluated to produce an array of values.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - If it evaluates to a single value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> that is treated as equivalent to an array containing that single value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - If it evaluates to nothing (no match or empty array)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the result of the operator expression is nothing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- For each value in the LHS array in turn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - The value is known as the _context_ and is used as the basis for any relative path expression on the RHS.  It is also accessible in the RHS expression using the `$` symbol.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - The RHS expression is evaluated to produce a value or array of values (or nothing).  These values are appended to a combined array of results for the operator as a whole.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- The combined result of the operator is returned.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This operator is left associative meaning that the expression `a.b.c.d` is evaluated like `((a.b).c).d`; i.e. left to right</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Address.City` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Winchester&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Phone.number` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0203 544 1234&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001234&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01962 001235&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;077 7700 1234&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Account.Order.Product.(Price * Quantity)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">68.9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">21.67</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">137.8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">107.99</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Account.Order.OrderID.$uppercase()` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ORDER103&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ORDER104&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">` ... `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">` (Filter)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The filter operator (a.k.a predicate) is used to select only the items in the input sequence that satisfy the predicate expression contained between the square brackets.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the predicate expression is an integer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or an expression that evaluates to an integer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the item at that position (zero offset) in the input sequence is the only item selected for the result sequence.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the number is non-integer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is rounded _down_ to the nearest integer.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the predicate expression is an array of integers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or an expression that evaluates to an array of integers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the items at those positions (zero offset) in the input sequence is the only item selected for the result sequence.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the predicate expression evaluates to any other value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is cast to a Boolean as if using the `$boolean()` function.  If this evaluates to `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the item is retained in the result sequence.  Otherwise it is rejected.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">See </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Navigating JSON Arrays</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#navigating-json-arrays) and </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Predicates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#predicate) for more details and examples.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `^(` ... `)` (Order-by)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The order-by operator is used to sort an array of values into ascending or descending order according to one or more expressions defined within the parentheses.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">By default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the array will be sorted into ascending order.  For example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Account.Order.Product^(Price)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sorts all of the products into order of increasing price (`Price` is a numeric field in the `Product` object).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">To sort in descending order</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the sort expression must be preceded by the `&gt;` symbol. For example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Account.Order.Product^(&gt;Price)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sorts all of the products into order of decreasing price.  The `&lt;` symbol can be used to explicitly indicate ascending order</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> although that is the default behaviour.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Secondary (and more) sort expressions can be specified by separating them with commas (`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">`).  The secondary expression will be used to determine order if the primary expression ranks two values the same.  For example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Account.Order.Product^(&gt;Price</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &lt;Quantity)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">orders the products primarily by decreasing price</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but for products of the same price</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> by increasing quantity.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The sort expression(s) can be any valid JSONata expression that evaluates to a number or a string.  If it evaluates to a string then the array is sorted in order of unicode codepoint.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Account.Order.Product^(Price * Quantity)` =&gt; Increasing order of price times quantity.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `student</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">type=&#x27;fulltime&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">^(DoB).name` =&gt; The names of all full time students sorted by date of birth (the DoB value is an ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token plain"> date format)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">` ... `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">` (Reduce)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The reduce operator can be used as the last step in a path expression to group and aggregate its input sequence into a single object.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The key/value pairs between the curly braces determine the groupings (by evaluating the key expression) and the aggregated values for each group.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">See </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Grouping and Aggregation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#grouping) for more details.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `*` (Wildcard)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This wildcard selects the values of all the properties of the context object.  It can be used in a path expression in place of a property name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but it cannot be combined with other characters like a glob pattern.  The order of these values in the result sequence is implementation dependent.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">See </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Wildcards</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#wildcards) for examples.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `**` (Descendants)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This wildcard recursively selects the values of all the properties of the context object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and the properties of any objects contained within these values as it descends the hierarchy.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">See </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Navigate arbitrary depths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#navigate-arbitrary-depths).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `%` (Parent)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This will select the &#x27;parent&#x27; of the current context value.  Here</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> we define &#x27;parent&#x27; to be the enclosing object which has the property representing the context value.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This is the only operation which searches &#x27;backwards&#x27; in the input data structure. It is implemented by static analysis of the expression at </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">compile time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//docs.jsonata.org/embedding-extending#jsonatastr) and can only be used within expressions that navigate through that target parent value in the first place.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> for any reason</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the parent location cannot be determined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then a static error (S0217) is thrown.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;Product&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> `Product Name`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;Order&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> %.OrderID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;Account&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> %.%.`Account Name`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This returns an array of objects for each product in each order in each account.  Information from the enclosing Order and Account objects can be accessed using the parent operator.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The repeated combination of `%.%.` is used to access the grandparent and higher ancestors.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `#` (Positional variable binding)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This can be used to determine at which position in the sequence the current context item is.  It can be used following any map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> filter or order-by stage in the path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The variable is available for use within subsequent stages of the path (e.g. within filter predicates) and goes out of scope at the end of the path expression.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">library.books#$i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&#x27;Kernighan&#x27; in authors</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;title&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;index&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $i</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This returns an array of objects for each book in the library where Kernighan is one of the authors.  Each object contains the book&#x27;s title and its position within the books array before it was filtered.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `@` (Context variable binding)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This is used to bind the current context item (`$`) to a named variable.  It can only be used directly following a map stage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> not a filter or order-by stage.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The variable binding remains in scope for the remainder of the path expression.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Because the current context has now been explicitly bound to a named variable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> this context will be carried forward to be the context of the next stage in the path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">For example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> in this snippet of a path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> `library.loans@$l.books`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the loans array is a property of the library object and each loan will</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> in turn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> be bound to the variable `$l`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The books array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> which is also a property of the library object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> will then be selected.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This operator can be used to perform data joins within a path because of its ability to do cross-referencing across objects.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">library.loans@$l.books@$b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">$l.isbn=$b.isbn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;title&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $b.title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;customer&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $l.customer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This performs an &#x27;inner join&#x27; between objects in the loans array and objects in the books array where the ISBNs match between the structures.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Block expressions can be used to widen the scope of the data cross-referencing as shown in this example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(library.loans)@$l.(catalog.books)@$b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">$l.isbn=$b.isbn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;title&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $b.title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;customer&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> $l.customer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Numeric Operators</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `+` (Addition)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The addition operator adds the operands to produce the numerical sum.  It is an error if either operand is not a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> + </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `-` (Substraction/Negation)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The subtraction operator subtracts the RHS value from the LHS value to produce the numerical difference  It is an error if either operand is not a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">It can also be used in its unary form to negate a number</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> - </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `- </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token plain">` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">-42</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `*` (Multiplication)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The multiplication operator multiplies the operands to produce the numerical product.  It is an error if either operand is not a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> * </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `/` (Division)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The division operator divides the RHS into the LHS to produce the numerical quotient.  It is an error if either operand is not a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> / </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">2.5</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `%` (Modulo)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The modulo operator divides the RHS into the LHS using whole number division to produce a whole number quotient and a remainder.  This operator returns the remainder.  It is an error if either operand is not a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> % </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `..` (Range)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The sequence generation operator is used to create an array of monotonically increasing integer start with the number on the LHS and ending with the number on the RHS.  It is an error if either operand does not evaluate to an integer.  The sequence generator can only be used within an array constructor </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..$count(Items)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item &quot;</span><span class="token plain"> &amp; $)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.($*$)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">16</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Comparison Operators</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `=` (Equals)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The equality operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if both operands are the same (type and value).  Arrays and objects are checked for deep equality.  Arrays must have the same values in the same order. Objects must have the same key/value pairs (order is not relevant).  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">+</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> = </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token plain"> = </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `!=` (Not equals)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The inequality operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` if both operands are the same (type and value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> deep equality).  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">+</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> != </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token plain"> != </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `&gt;` (Greater than)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;greater than&#x27; operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the LHS is numerically greater than the RHS.  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain"> / </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `&lt;` (Less than)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;less than&#x27; operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the LHS is numerically less than the RHS.  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain"> / </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain"> &lt; </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> &lt; </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `&gt;=` (Greater than or equals)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;greater than or equals&#x27; operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the LHS is numerically greater than or equal to the RHS.  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain"> / </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain"> &gt;= </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> &gt;= </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `&lt;=` (Less than or equals)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;less than or equals&#x27; operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the LHS is numerically less than or equal to the RHS.  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain"> / </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain"> &lt;= </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> &lt;= </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `in` (Inclusion)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The array (sequence) inclusion operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the value of the LHS is included in the array of values on the RHS.  Otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.  If the RHS is a single value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is treated as a singleton array.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token plain"> in </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token plain"> in </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token plain">` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `library.books</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Aho&quot;</span><span class="token plain"> in authors</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.title`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Boolean Operators</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `and` (Boolean AND)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;and&#x27; operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if both operands evaluate to `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`.  If either or both operands is not a Boolean type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then they are first cast to a Boolean using the rules of the `$boolean` function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`library.books</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Aho&quot;</span><span class="token plain"> in authors and price &lt; </span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.title`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `or` (Boolean OR)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;or&#x27; operator returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if either operand evaluates to `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`.  If either or both operands is not a Boolean type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then they are first cast to a Boolean using the rules of the `$boolean` function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`library.books</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">price &lt; </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> or section=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;diy&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.title`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Please note that Boolean &#x27;NOT&#x27; is a </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#not)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> not an operator.__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Other Operators</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `&amp;` (Concatenation)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The string concatenation operator is used to join the string values of the operands into a single resultant string.  If either or both of the operands are not strings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then they are first cast to string using the rules of the `$string` function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token plain"> &amp; </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token plain">` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HelloWorld&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `? </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">` (Conditional)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The conditional ternary operator is used to evaluate one of two alternative expressions based on the result of a predicate (test) condition.  The operator takes the form</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`&lt;test_expr&gt; ? &lt;expr_T&gt; </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> &lt;expr_F&gt;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `&lt;test_expr&gt;` expression is first evaluated.  If it evaluates to Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the operator returns the result of evaluating the `&lt;expr_T&gt;` expression.  Otherwise it returns the result of evaluating the `&lt;expr_F&gt;` expression. If `&lt;test_expr&gt;` evaluates to a non-Boolean value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the value is first cast to Boolean using the rules of the `$boolean` function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Price &lt; </span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token plain"> ? </span><span class="token property">&quot;Cheap&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Expensive&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">=` (Variable binding)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The variable binding operator is used to bind the value of the RHS to the variable name defined on the LHS.  The variable binding is scoped to the current block and any nested blocks.  It is an error if the LHS is not a `$` followed by a valid variable name.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$five </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$square </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= function($n) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> $n * $n </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `~&gt;` (Chain)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The function chaining operator is used in the situations where multiple nested functions need to be applied to a value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> while making it easy to read. The value on the LHS is evaluated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then passed into the function on the RHS as its first argument.  If the function has any other arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then these are passed to the function in parenthesis as usual.  It is an error if the RHS is not a function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or an expression that evaluates to a function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$uppercase($substringBefore($substringAfter(Customer.Email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@&quot;</span><span class="token plain">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token plain">))`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$sum(Account.Order.Product.(Price * Quantity))`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">can be more clearly written</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Customer.Email ~&gt; $substringAfter(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@&quot;</span><span class="token plain">) ~&gt; $substringBefore(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token plain">) ~&gt; $uppercase()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`Account.Order.Product.(Price * Quantity) ~&gt; $sum()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This operator can also be used in a more abstract form to define new functions based on a combination of existing functions.  In this form</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> there is no value passed in on the LHS of the first function in the chain.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">For example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the expression</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $uppertrim </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= $trim ~&gt; $uppercase;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $uppertrim(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;   Hello    World   &quot;</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HELLO WORLD&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">creates a new function `$uppertrim` that performs `$trim` followed by `$uppercase`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `... ~&gt; | ... | ... |` (Transform)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The object transform operator is used to modify a copy of an object structure using a pattern/action syntax to target specific modifications while keeping the rest of the structure unchanged.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The syntax has the following structure</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`head ~&gt; | location | update </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> |`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">where</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `head` evaluates to the object that is to be copied and transformed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `location` evaluates to the part(s) within the copied object that are to be updated. The `location` expression is evaluated relative to the result of `head`. The result of evaluating `location` must be an object or array of objects.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `update` evaluates to an object that is merged into the object matched by each `location`. `update` is evaluated relative to the result of `location` and if `location` matched multiple objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the update gets evaluated for each one of these. The result of (each) update is merged into the result of `location`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `delete` (optional) evaluates to a string or an array of strings. Each string is the name of the name/value pair in each object matched by `location` that is to be removed from the resultant object.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `~&gt;` operator is the operator for function chaining and passes the value on the left hand side to the function on the right hand side as its first argument. The expression on the right hand side must evaluate to a function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> hence the `|...|...|` syntax generates a function with one argument.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`| Account.Order.Product | </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&#x27;Price&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Price * </span><span class="token number" style="color:rgb(247, 140, 108)">1.2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> |`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">defines a transform that will return a deep copy the object passed to it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but with the `Product` object modified such that its `Price` property has had its value increased by </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">%. The first part of the expression is the path location that specifies all of the objects within the overall object to change</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and the second part defines an object that will get merged into the object(s) matched by the first part. The merging semantics is the same as that of the `$merge()` function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This transform definition syntax creates a JSONata function which you can either assign to a variable and use multiple times</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or invoke inline.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`payload ~&gt; |Account.Order.Product|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&#x27;Price&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Price * </span><span class="token number" style="color:rgb(247, 140, 108)">1.2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">|`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">or</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$increasePrice </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= |Account.Order.Product|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&#x27;Price&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Price * </span><span class="token number" style="color:rgb(247, 140, 108)">1.2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">|`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This also has the benefit that multiple transforms can be chained together for more complex transformations.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">In common with `$merge()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> multiple changes (inserts or updates) can be made to an object.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`|Account.Order.Product|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&#x27;Price&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Price * </span><span class="token number" style="color:rgb(247, 140, 108)">1.2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;Total&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Price * Quantity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">|`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Note that the Total will be calculated using the original price</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> not the modified one (JSONata is declarative not imperative).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Properties can also be removed from objects.  This is done using the optional `delete` clause which specifies the name(s) of the properties to delete.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Example</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$ ~&gt; |Account.Order.Product|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&#x27;Total&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Price * Quantity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&#x27;Price&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;Quantity&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">|`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This copies the input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but for each `Product` it inserts a Total and removes the `Price` and `Quantity` properties.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># String functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$string()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$string(arg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> prettify)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Casts the `arg` parameter to a string using the following casting rules</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Strings are unchanged</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Functions are converted to an empty string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Numeric infinity and NaN throw an error because they cannot be represented as a JSON number</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - All other values are converted to a JSON string using the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">JSON.stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `arg` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `arg`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `prettify` is </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;prettified&quot;</span><span class="token plain"> JSON is produced. i.e One line per field and lines will be indented based on the field depth.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$string(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.$string()` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$length()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$length(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the number of characters in the string `str`.  If `str` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  An error is thrown if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$length(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$substring()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$substring(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns a string containing the characters in the first parameter `str` starting at position `start` (zero-offset).  If `str` is not specified (i.e. this function is invoked with only the numeric argument(s))</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  An error is thrown if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `length` is specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the substring will contain maximum `length` characters.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `start` is negative then it indicates the number of characters from the end of `str`.  See </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">substr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substr) for full definition.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$substring(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lo World&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$substring(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lo Wo&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$substring(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-4</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;orld&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$substring(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;or&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$substringBefore()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$substringBefore(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> chars)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the substring before the first occurrence of the character sequence `chars` in `str`.  If `str` is not specified (i.e. this function is invoked with only one argument)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  If `str` does not contain `chars`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it returns `str`.   An error is thrown if `str` and `chars` are not strings.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$substringBefore(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot; &quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$substringAfter()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$substringAfter(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> chars)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the substring after the first occurrence of the character sequence `chars` in `str`.  If `str` is not specified (i.e. this function is invoked with only one argument)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  If `str` does not contain `chars`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it returns `str`.   An error is thrown if `str` and `chars` are not strings.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$substringAfter(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot; &quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$uppercase()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$uppercase(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns a string with all the characters of `str` converted to uppercase.  If `str` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  An error is thrown if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$uppercase(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HELLO WORLD&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$lowercase()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$lowercase(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns a string with all the characters of `str` converted to lowercase.  If `str` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  An error is thrown if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$lowercase(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello world&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$trim()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$trim(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Normalizes and trims all whitespace characters in `str` by applying the following steps</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- All tabs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> carriage returns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and line feeds are replaced with spaces.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Contiguous sequences of spaces are reduced to a single space.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Trailing and leading spaces are removed.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `str` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  An error is thrown if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$trim(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;   Hello    \n World  &quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$pad()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$pad(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> width </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> char</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns a copy of the string `str` with extra padding</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if necessary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> so that its total number of characters is at least the absolute value of the `width` parameter.  If `width` is a positive number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the string is padded to the right; if negative</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it is padded to the left.  The optional `char` argument specifies the padding character(s) to use.  If not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it defaults to the space character.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$pad(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo  &quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$pad(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-5</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;  foo&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$pad(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;##foo&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatBase(</span><span class="token number" style="color:rgb(247, 140, 108)">35</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">) ~&gt; $pad(</span><span class="token number" style="color:rgb(247, 140, 108)">-8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">&#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00100011&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$contains()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$contains(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pattern)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if `str` is matched by `pattern`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> otherwise it returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`. If `str` is not specified (i.e. this function is invoked with one argument)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `pattern` parameter can either be a string or a regular expression (regex).  If it is a string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the function returns `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the characters within `pattern` are contained contiguously within `str`.  If it is a regex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the function will return `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the regex matches the contents of `str`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$contains(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abracadabra&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bra&quot;</span><span class="token plain">)` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$contains(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abracadabra&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /a.*a/)` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$contains(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abracadabra&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /ar.*a/)` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$contains(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /wo/)` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$contains(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /wo/i)` =&gt; `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `Phone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">$contains(number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /^</span><span class="token number" style="color:rgb(247, 140, 108)">077</span><span class="token plain">/)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mobile&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;number&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;077 7700 1234&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$split()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$split(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> separator </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> limit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Splits the `str` parameter into an array of substrings.  If `str` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  It is an error if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `separator` parameter can either be a string or a regular expression (regex).  If it is a string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it specifies the characters within `str` about which it should be split.  If it is the empty string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> `str` will be split into an array of single characters.  If it is a regex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it splits the string around any sequence of characters that match the regex.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The optional `limit` parameter is a number that specifies the maximum number of substrings to  include in the resultant array.  Any additional substrings are discarded.  If `limit` is not  specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then `str` is fully split with no limit to the size of the resultant array.  It is an error if `limit` is not a non-negative number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$split(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;so many words&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot; &quot;</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;so&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;many&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;words&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$split(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;so many words&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot; &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;so&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;many&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$split(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;too much, punctuation. hard; to read&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">.;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">+/)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;too&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;much&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;punctuation&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hard&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;to&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;read&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$join()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$join(array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> separator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Joins an array of component strings into a single concatenated string with each component string separated by the optional `separator` parameter.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">It is an error if the input array contains an item which isn&#x27;t a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `separator` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is assumed to be the empty string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i.e. no separator between the component strings.  It is an error if `separator` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$join(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&#x27;a&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">&#x27;b&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">&#x27;c&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abc&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$split(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;too much, punctuation. hard; to read&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">.;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">+/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">) ~&gt; $join(&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;too, much, punctuation&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$match()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$match(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pattern </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> limit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Applies the `str` string to the `pattern` regular expression and returns an array of objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> with each object containing information about each occurrence of a match withing `str`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The object contains the following fields</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `match` - the substring that was matched by the regex.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `index` - the offset (starting at zero) within `str` of this match.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `groups` - if the regex contains capturing groups (parentheses)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> this contains an array of strings representing each captured group.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `str` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  It is an error if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$match(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ababbabbcc&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">/a(b+)/)` =&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;match&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ab&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;index&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;groups&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;match&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;index&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;groups&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;match&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;index&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;groups&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bb&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$replace()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$replace(str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> replacement </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> limit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Finds occurrences of `pattern` within `str` and replaces them with `replacement`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `str` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `str`.  It is an error if `str` is not a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `pattern` parameter can either be a string or a regular expression (regex).  If it is a string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it specifies the substring(s) within `str` which should be replaced.  If it is a regex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> its is used to find .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `replacement` parameter can either be a string or a function.  If it is a string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it specifies the sequence of characters that replace the substring(s) that are matched by `pattern`.  If `pattern` is a regex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the `replacement` string can refer to the characters that were matched by the regex as well as any of the captured groups using a `$` followed by a number `N`</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- If `N = </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is replaced by substring matched by the regex as a whole.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- If `N &gt; </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is replaced by the substring captured by the Nth parenthesised group in the regex.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- If `N` is greater than the number of captured groups</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is replaced by the empty string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- A literal `$` character must be written as `$$` in the `replacement` string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the `replacement` parameter is a function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is invoked for each match occurrence of the `pattern` regex.  The `replacement` function must take a single parameter which will be the object structure of a regex match as described in the `$match` function; and must return a string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The optional `limit` parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">  is a number that specifies the maximum number of replacements to make before stopping.  The remainder of the input beyond this limit will be copied to the output unchanged.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $replace(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;John Smith and John Jones&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;John&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mr&quot;</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mr Smith and Mr Jones&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $replace(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;John Smith and John Jones&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;John&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mr&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mr Smith and John Jones&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $replace(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abracadabra&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /a.*?a/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*c*bra&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $replace(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;John Smith&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /(\w+)\s(\w+)/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$2, $1&quot;</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Smith, John&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $replace(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;265USD&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token number" style="color:rgb(247, 140, 108)">-9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">+)USD/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$$$1&quot;</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$265&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $convert </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= function($m) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ($number($m.groups</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">) - </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain">) * </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">/</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token plain"> &amp; </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;C&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $replace(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;temperature = 68F today&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> /(\d+)F/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $convert)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  **Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;temperature = 20C today&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$eval()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$eval(expr </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Parses and evaluates the string `expr` which contains literal JSON or a JSONata expression using the current context as the context for evaluation.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$eval(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;[1,2,3]&quot;</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Query**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$eval(&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">$string(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Result**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Optionally override the context by specifying the second parameter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$base64encode()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$base64encode()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Converts an ASCII string to a base </span><span class="token number" style="color:rgb(247, 140, 108)">64</span><span class="token plain"> representation. Each each character in the string is treated as a byte of binary data. This requires that all characters in the string are in the 0x00 to 0xFF range</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> which includes all characters in URI encoded strings. Unicode characters outside of that range are not supported.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$base64encode(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;myuser:mypass&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bXl1c2VyOm15cGFzcw==&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$base64decode()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$base64decode()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Converts base </span><span class="token number" style="color:rgb(247, 140, 108)">64</span><span class="token plain"> encoded bytes to a string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> using a UTF</span><span class="token number" style="color:rgb(247, 140, 108)">-8</span><span class="token plain"> Unicode codepage.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$base64decode(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bXl1c2VyOm15cGFzcw==&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;myuser:mypass&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$encodeUrlComponent()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$encodeUrlComponent(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Encodes a Uniform Resource Locator (URL) component by replacing each instance of certain characters by one</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> two</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> three</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or four escape sequences representing the UTF</span><span class="token number" style="color:rgb(247, 140, 108)">-8</span><span class="token plain"> encoding of the character.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$encodeUrlComponent(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;?x=test&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%3Fx%3Dtest&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$encodeUrl()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$encodeUrl(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Encodes a Uniform Resource Locator (URL) by replacing each instance of certain characters by one</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> two</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> three</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or four escape sequences representing the UTF</span><span class="token number" style="color:rgb(247, 140, 108)">-8</span><span class="token plain"> encoding of the character.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$encodeUrl(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://mozilla.org/?x=шеллы&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://mozilla.org/?x=%D1%88%D0%B5%D0%BB%D0%BB%D1%8B&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$decodeUrlComponent()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$decodeUrlComponent(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Decodes a Uniform Resource Locator (URL) component previously created by encodeUrlComponent.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$decodeUrlComponent(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%3Fx%3Dtest&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;?x=test&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$decodeUrl()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$decodeUrl(str)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Decodes a Uniform Resource Locator (URL) previously created by encodeUrl.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$decodeUrl(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://mozilla.org/?x=%D1%88%D0%B5%D0%BB%D0%BB%D1%8B&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://mozilla.org/?x=шеллы&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Numeric functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$number()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$number(arg)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Casts the `arg` parameter to a number using the following casting rules</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Numbers are unchanged</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Strings that contain a sequence of characters that represent a legal JSON number are converted to that number</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` casts to `</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` casts to `</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - All other values cause an error to be thrown.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `arg` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `arg`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$number(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5&quot;</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">.$number()` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$abs()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$abs(number)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the absolute value of the `number` parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i.e. if the number is negative</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> it returns the positive value.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `number` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `number`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$abs(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$abs(</span><span class="token number" style="color:rgb(247, 140, 108)">-5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">-5</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$floor()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$floor(number)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the value of `number` rounded down to the nearest integer that is smaller or equal to `number`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `number` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `number`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$floor(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$floor(</span><span class="token number" style="color:rgb(247, 140, 108)">5.3</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$floor(</span><span class="token number" style="color:rgb(247, 140, 108)">5.8</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$floor(</span><span class="token number" style="color:rgb(247, 140, 108)">-5.3</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">-6</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$ceil()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$ceil(number)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the value of `number` rounded up to the nearest integer that is greater than or equal to `number`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `number` is not specified (i.e. this function is invoked with no arguments)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `number`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$ceil(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$ceil(</span><span class="token number" style="color:rgb(247, 140, 108)">5.3</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$ceil(</span><span class="token number" style="color:rgb(247, 140, 108)">5.8</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$ceil(</span><span class="token number" style="color:rgb(247, 140, 108)">-5.3</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">-5</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$round()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$round(number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> precision</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the value of the `number` parameter rounded to the number of decimal places specified by the optional `precision` parameter.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `precision` parameter (which must be an integer) species the number of decimal places to be present in the rounded number.   If `precision` is not specified then it defaults to the value `</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">` and the number is rounded to the nearest integer.  If `precision` is negative</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then its value specifies which column to round to on the left side of the decimal place</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This function uses the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Round half to even</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//en.wikipedia.org/wiki/Rounding#Round_half_to_even) strategy to decide which way to round numbers that fall exactly between two candidates at the specified precision.  This strategy is commonly used in financial calculations and is the default rounding mode in IEEE 754.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">123.456</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">123.456</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">123.46</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">123.456</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-1</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">120</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">123.456</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-2</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">11.5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">12.5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$round(</span><span class="token number" style="color:rgb(247, 140, 108)">125</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-1</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">120</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$power()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$power(base</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> exponent)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the value of `base` raised to the power of `exponent` (&lt;code&gt;base&lt;sup&gt;exponent&lt;/sup&gt;&lt;/code&gt;).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `base` is not specified (i.e. this function is invoked with one argument)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `base`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">An error is thrown if the values of `base` and `exponent` lead to a value that cannot be represented as a JSON number (e.g. Infinity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> complex numbers).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$power(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$power(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">1.414213562373</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$power(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-2</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">0.25</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$sqrt()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$sqrt(number)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the square root of the value of the `number` parameter.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `number` is not specified (i.e. this function is invoked with one argument)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `number`. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">An error is thrown if the value of `number` is negative.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$sqrt(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$sqrt(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">1.414213562373</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$random()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$random()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns a pseudo random number greater than or equal to zero and less than one (&lt;code&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> &amp;#</span><span class="token number" style="color:rgb(247, 140, 108)">8804</span><span class="token plain">; n &lt; </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">&lt;/code&gt;) </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$random()` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">0.7973541067127</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$random()` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">0.4029142127028</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$random()` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">0.6558078550072</span><span class="token plain">`  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$formatNumber()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$formatNumber(number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> picture </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Casts the `number` to a string and formats it to a decimal representation as specified by the `picture` string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The behaviour of this function is consistent with the XPath/XQuery function </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">format-number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.w3.org/TR/xpath-functions-31/#func-format-number) as defined in the XPath F&amp;O 3.1 specification.  The picture string parameter defines how the number is formatted and has the [same syntax](https://www.w3.org/TR/xpath-functions-31/#syntax-of-picture-string) as fn:format-number.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The optional third argument `options` is used to override the default locale specific formatting characters such as the decimal separator.  If supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> this argument must be an object containing name/value pairs specified in the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">decimal format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.w3.org/TR/xpath-functions-31/#defining-decimal-format) section of the XPath F&amp;O 3.1 specification.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">12345.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;#</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">###.</span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain">&#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;12,345.60&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">1234.5678</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00.000e0&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;12.346e2&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">34.555</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#0.00;(#0.00)&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;34.56&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">-34.555</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#0.00;(#0.00)&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;(34.56)&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">0.14</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;01%&quot;</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;14%&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">0.14</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;###pm&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;per-mille&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;pm&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;140pm&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatNumber(</span><span class="token number" style="color:rgb(247, 140, 108)">1234.5678</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;①①.①①①e①&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;zero-digit&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;\u245f&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;①②.③④⑥e②&quot;</span><span class="token plain">`   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$formatBase()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$formatBase(number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> radix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Casts the `number` to a string and formats it to an integer represented in the number base specified by the `radix` argument.  If `radix` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it defaults to base </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">.  `radix` can be between </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> and </span><span class="token number" style="color:rgb(247, 140, 108)">36</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> otherwise an error is thrown.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatBase(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1100100&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatBase(</span><span class="token number" style="color:rgb(247, 140, 108)">2555</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">16</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;9fb&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$formatInteger()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$formatInteger(number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> picture)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Casts the `number` to a string and formats it to an integer representation as specified by the `picture` string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The behaviour of this function is consistent with the two-argument version of the XPath/XQuery function </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">format-integer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.w3.org/TR/xpath-functions-31/#func-format-integer) as defined in the XPath F&amp;O 3.1 specification.  The picture string parameter defines how the number is formatted and has the same syntax as fn:format-integer.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatInteger(</span><span class="token number" style="color:rgb(247, 140, 108)">2789</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;w&#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;two thousand, seven hundred and eighty-nine&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$formatInteger(</span><span class="token number" style="color:rgb(247, 140, 108)">1999</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;I&#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MCMXCIX&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$parseInteger()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$parseInteger(string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> picture)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Parses the contents of the `string` parameter to an integer (as a JSON number) using the format specified by the `picture` string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The picture string parameter has the same format as `$formatInteger`. Although the XPath specification does not have an equivalent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function for parsing integers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> this capability has been added to JSONata.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$parseInteger(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;twelve thousand, four hundred and seventy-six&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;w&#x27;)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">12476</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$parseInteger(&#x27;</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">345</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">678</span><span class="token plain">&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;#</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">##</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">&#x27;)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">12345678</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Numeric aggregation functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$sum()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$sum(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the arithmetic sum of an array of numbers.  It is an error if the input array contains an item which isn&#x27;t a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$sum(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$max()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$max(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the maximum number in an array of numbers.  It is an error if the input array contains an item which isn&#x27;t a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$max(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$min()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$min(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the minimum number in an array of numbers.  It is an error if the input array contains an item which isn&#x27;t a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$min(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$average()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$average(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the mean value of an array of numbers.  It is an error if the input array contains an item which isn&#x27;t a number.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$average(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Boolean functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$boolean()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$boolean(arg)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Casts the argument to a Boolean using the following rules</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Argument type | Result |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| ------------- | ------ |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Boolean | unchanged |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| string</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> empty | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| string</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> non-empty | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| number</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| number</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> non-zero | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| </span><span class="token null keyword" style="font-style:italic">null</span><span class="token plain"> | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`|</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| array</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> empty | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| array</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> contains a member that casts to `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` |  `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| array</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> all members cast to `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` |  `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| object</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> empty | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| object</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> non-empty | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| function | `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$not()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$not(arg)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns Boolean NOT on the argument.  `arg` is first cast to a boolean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$exists()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$exists(arg)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` if the arg expression evaluates to a value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">` if the expression does not match anything (e.g. a path to a non-existent field reference).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Array Functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$count()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$count(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the number of items in the `array` parameter.  If the `array` parameter is not an array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but rather a value of another JSON type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the parameter is treated as a singleton array containing that value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and this function returns `</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `array` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `array`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$count(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$count(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token plain">)` =&gt; </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$append()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$append(array1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> array2)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing the values in `array1` followed by the values in `array2`.  If either parameter is not an array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then it is treated as a singleton array containing that value.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$append(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$append(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$append(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$sort()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$sort(array </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing all the values in the `array` parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but sorted into order.  If no `function` parameter is supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the `array` parameter must contain only numbers or only strings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and they will be sorted in order of increasing number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or increasing unicode codepoint respectively.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If a comparator `function` is supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then is must be a function that takes two parameters</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`function(left</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> right)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This function gets invoked by the sorting algorithm to compare two values `left` and `right`.  If the value of `left` should be placed after the value of `right` in the desired sort order</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the function must return Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` to indicate a swap.  Otherwise it must return `</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$sort(Account.Order.Product</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function($l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $r) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $l.Description.Weight &gt; $r.Description.Weight</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This sorts the products in order of increasing weight.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The sorting algorithm is *stable* which means that values within the original array which are the same according to the comparator function will remain in the original order in the sorted array.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$reverse()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$reverse(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing all the values from the `array` parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but in reverse order.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$reverse(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;World&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> ~&gt; $reverse()` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$shuffle()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$shuffle(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing all the values from the `array` parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but shuffled into random order.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$shuffle(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$distinct()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature__ `$distinct(array)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing all the values from the `array` parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> but with any duplicates removed.  Values are tested for deep equality as if by using the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">equality operator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#equals).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$distinct(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$distinct(Account.Order.Product.Description.Colour)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Purple&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Orange&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Black&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$zip()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$zip(array1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ...)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns a convolved (zipped) array containing grouped arrays of values from the `array1` ... `arrayN` arguments from index </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> etc.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This function accepts a variable number of arguments.  The length of the returned array is equal to the length of the shortest array in the arguments.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$zip(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$zip(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Object functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$keys()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$keys(object)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing the keys in the object.  If the argument is an array of objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the array returned contains a de-duplicated list of all the keys in all of the objects.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$lookup()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$lookup(object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> key)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the value associated with `key` in `object`. If the first argument is an array of objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then all of the objects in the array are searched</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and the values associated with all occurrences of `key` are returned.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$spread()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$spread(object)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Splits an `object` containing key/value pairs into an array of objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> each of which has a single key/value pair from the input `object`.  If the parameter is an array of objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the resultant array contains an object for every key/value pair in every object in the supplied array.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$merge()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$merge(array&lt;object&gt;)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Merges an array of objects into a single object containing all the key/value pairs from each of the objects in the input array.  If any of the input objects contain the same key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the returned object will contain the value of the last one in the array.  It is an error if the input array contains an item that is not an object.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$sift()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$sift(object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">See definition under &#x27;Higher-order functions&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$each()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$each(object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing the values return by the `function` when applied to each key/value pair in the `object`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `function` parameter will get invoked with two arguments</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`function(value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> name)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">where the `value` parameter is the value of each name/value pair in the object and `name` is its name.  The `name` parameter is optional.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`$each(Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function($v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $k) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">$k &amp; </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;: &quot;</span><span class="token plain"> &amp; $v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Street: Hursley Park&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;City: Winchester&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Postcode: SO21 2JN&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$error()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__`$error(message)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Deliberately throws an error with an optional `message`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$assert()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__`$assert(condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> message)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If condition is </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the function returns undefined. If the condition is </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> an exception is thrown with the message as the message of the exception.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$type()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__`$type(value)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Evaluates the type of `value` and returns one of the following strings</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;null&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;number&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;string&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;boolean&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;array&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;object&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;function&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns (non-string) `undefined` when `value` is `undefined`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Date/Time functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$now()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$now(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">picture </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Generates a UTC timestamp in ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token plain"> compatible format and returns it as a string.  All invocations of `$now()` within an evaluation of an expression will all return the same timestamp value.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the optional `picture` and `timezone` parameters are supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the current timestamp is formatted as described by the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">`$fromMillis()`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(#frommillis) function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$now()` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2017-05-15T15:12:59.152Z&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$millis()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$millis()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the number of milliseconds since the Unix *Epoch* (</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> January</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1970</span><span class="token plain"> UTC) as a number.  All invocations of `$millis()` within an evaluation of an expression will all return the same value.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$millis()` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">1502700297574</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$fromMillis()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$fromMillis(number </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> picture </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Convert the `number` representing milliseconds since the Unix *Epoch* (</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> January</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1970</span><span class="token plain"> UTC) to a formatted string representation of the timestamp  as specified by the `picture` string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the optional `picture` parameter is omitted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the timestamp is formatted in the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.iso.org/iso-8601-date-and-time-format.html) format.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the optional `picture` string is supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the timestamp is formatted occording to the representation specified in that string.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The behaviour of this function is consistent with the two-argument version of the XPath/XQuery function </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">fn</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">format-dateTime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.w3.org/TR/xpath-functions-31/#func-format-dateTime) as defined in the XPath F&amp;O 3.1 specification.  The picture string parameter defines how the timestamp is formatted and has the [same syntax](https://www.w3.org/TR/xpath-functions-31/#date-picture-string) as fn:format-dateTime.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the optional `timezone` string is supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the formatted timestamp will be in that timezone.  The `timezone` string should be in the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">format </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;±HHMM&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> where ± is either the plus or minus sign and HHMM is the offset in hours and minutes from UTC.  Positive offset for timezones</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">east of UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> negative offset for timezones west of UTC. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$fromMillis(</span><span class="token number" style="color:rgb(247, 140, 108)">1510067557121</span><span class="token plain">)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2017-11-07T15:12:37.121Z&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$fromMillis(</span><span class="token number" style="color:rgb(247, 140, 108)">1510067557121</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">M01</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">D01</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Y0001</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">h#</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">m01</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">P</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;11/07/2017 3:12pm&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$fromMillis(</span><span class="token number" style="color:rgb(247, 140, 108)">1510067557121</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">H01</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">m01</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">s01</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &#x27;</span><span class="token number" style="color:rgb(247, 140, 108)">-0500</span><span class="token plain">&#x27;)` =&gt; `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10:12:37 GMT-05:00&quot;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$toMillis()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$toMillis(timestamp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> picture</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Convert a `timestamp` string to the number of milliseconds since the Unix *Epoch* (</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> January</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1970</span><span class="token plain"> UTC) as a number. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the optional `picture` string is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the format of the timestamp is assumed to be </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">ISO </span><span class="token number" style="color:rgb(247, 140, 108)">8601</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.iso.org/iso-8601-date-and-time-format.html). An error is thrown if the string is not in the correct format.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the `picture` string is specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the format is assumed to be described by this picture string using the </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">same syntax</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">(https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.w3.org/TR/xpath-functions-31/#date-picture-string) as the XPath/XQuery function [fn:format-dateTime](https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime), defined in the XPath F&amp;O 3.1 specification.  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$toMillis(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2017-11-07T15:07:54.972Z&quot;</span><span class="token plain">)` =&gt; `</span><span class="token number" style="color:rgb(247, 140, 108)">1510067274972</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Higher order functions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$map()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$map(array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing the results of applying the `function` parameter to each value in the `array` parameter.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The function that is supplied as the second parameter must have the following signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`function(value </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Each value in the input array is passed in as the first parameter in the supplied function.  The index (position) of that value in the input array is passed in as the second parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.  The whole input array is passed in as the third parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Examples__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- `$map(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $string)` =&gt; `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;4&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">With user-defined (lambda) function</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$map(Email.address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function($v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $a) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &#x27;Item &#x27; &amp; ($i+</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">) &amp; &#x27; of &#x27; &amp; $count($a) &amp; &#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> &#x27; &amp; $v</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">evaluates to</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 1 of 4: fred.smith@my-work.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 2 of 4: fsmith@my-work.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 3 of 4: freddy@my-social.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Item 4 of 4: frederic.smith@very-serious.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$filter()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$filter(array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an array containing only the values in the `array` parameter that satisfy the `function` predicate (i.e. `function` returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` when passed the value).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The function that is supplied as the second parameter must have the following signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`function(value </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Each value in the input array is passed in as the first parameter in the supplied function.  The index (position) of that value in the input array is passed in as the second parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.  The whole input array is passed in as the third parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The following expression returns all the products whose price is higher than average</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$filter(Account.Order.Product</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function($v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $a) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $v.Price &gt; $average($a.Price)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$single()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$single(array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns the one and only one value in the `array` parameter that satisfy the `function` predicate (i.e. `function` returns Boolean `</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">` when passed the value).  Throws an exception if the number of matching values is not exactly one.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The function that is supplied as the second parameter must have the following signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`function(value </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Each value in the input array is passed in as the first parameter in the supplied function.  The index (position) of that value in the input array is passed in as the second parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.  The whole input array is passed in as the third parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The following expression the product in the order whose SKU is `</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0406654608&quot;</span><span class="token plain">`</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$single(Account.Order.Product</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function($v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $a) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $v.SKU = </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0406654608&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$reduce()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$reduce(array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an aggregated value derived from applying the `function` parameter successively to each value in `array` in combination with the result of the previous application of the function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The `function` must accept at least two arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and behaves like an infix operator between each value within the `array`.  The signature of this supplied function must be of the form</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`myfunc($accumulator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $index</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $product </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">= function($i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $j)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">$i * $j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $reduce(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $product)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This multiplies all the values together in the array `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">..</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">` to return `</span><span class="token number" style="color:rgb(247, 140, 108)">120</span><span class="token plain">`.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If the optional `init` parameter is supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then that value is used as the initial value in the aggregation (fold) process.  If not supplied</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the initial value is the first value in the `array` parameter.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## `$sift()`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">__ `$sift(object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> function)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Returns an object that contains only the key/value pairs from the `object` parameter that satisfy the predicate `function` passed in as the second parameter.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If `object` is not specified</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> then the context value is used as the value of `object`.  It is an error if `object` is not an object.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The function that is supplied as the second parameter must have the following signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`function(value </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">)`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Each value in the input object is passed in as the first parameter in the supplied function.  The key (property name) of that value in the input object is passed in as the second parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.  The whole input object is passed in as the third parameter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> if specified.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">__Example__</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Account.Order.Product.$sift(function($v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $k) </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">$k ~&gt; /^Product/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This sifts each of the `Product` objects such that they only contain the fields whose keys start with the string </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Product&quot;</span><span class="token plain"> (using a regex). This example returns</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Product Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Bowler Hat&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;ProductID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">858383</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Product Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Trilby hat&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;ProductID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">858236</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Product Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Bowler Hat&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;ProductID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">858383</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;ProductID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">345664</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Product Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Cloak&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/BIDMCDigitalPsychiatry/LAMP-platform/edit/master/docs/09-data_science/07-jsonata.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/data_science/cortex/developing_cortex"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Adding Cortex Features</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/data_science/data_portal"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using the LAMP Data Portal</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#navigating-json-objects" class="table-of-contents__link toc-highlight">Navigating JSON Objects</a></li><li><a href="#navigating-json-arrays" class="table-of-contents__link toc-highlight">Navigating JSON Arrays</a></li><li><a href="#json-literals" class="table-of-contents__link toc-highlight">JSON literals</a></li><li><a href="#parenthesized-expressions-and-blocks" class="table-of-contents__link toc-highlight">Parenthesized expressions and blocks</a></li><li><a href="#sorting" class="table-of-contents__link toc-highlight">Sorting</a></li><li><a href="#grouping" class="table-of-contents__link toc-highlight">Grouping</a></li><li><a href="#aggregation" class="table-of-contents__link toc-highlight">Aggregation</a></li><li><a href="#the-jsonata-type-system" class="table-of-contents__link toc-highlight">The JSONata type system</a></li><li><a href="#sequences" class="table-of-contents__link toc-highlight">Sequences</a></li><li><a href="#jsonata-path-processing" class="table-of-contents__link toc-highlight">JSONata path processing</a></li><li><a href="#comments" class="table-of-contents__link toc-highlight">Comments</a></li><li><a href="#conditional-logic" class="table-of-contents__link toc-highlight">Conditional logic</a></li><li><a href="#variables" class="table-of-contents__link toc-highlight">Variables</a><ul><li><a href="#built-in-variables" class="table-of-contents__link toc-highlight">Built-in variables</a></li><li><a href="#variable-binding" class="table-of-contents__link toc-highlight">Variable binding</a></li></ul></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#invoking-a-function" class="table-of-contents__link toc-highlight">Invoking a function</a></li><li><a href="#defining-a-function" class="table-of-contents__link toc-highlight">Defining a function</a></li><li><a href="#function-signatures" class="table-of-contents__link toc-highlight">Function signatures</a></li><li><a href="#recursive-functions" class="table-of-contents__link toc-highlight">Recursive functions</a></li><li><a href="#tail-call-optimization-tail-recursion" class="table-of-contents__link toc-highlight">Tail call optimization (Tail recursion)</a></li><li><a href="#higher-order-functions" class="table-of-contents__link toc-highlight">Higher order functions</a></li><li><a href="#functions-are-closures" class="table-of-contents__link toc-highlight">Functions are closures</a></li><li><a href="#partial-function-application" class="table-of-contents__link toc-highlight">Partial function application</a></li></ul></li><li><a href="#functions-which-use-regular-expressions" class="table-of-contents__link toc-highlight">Functions which use regular expressions</a></li><li><a href="#regular-expressions-in-query-predicates" class="table-of-contents__link toc-highlight">Regular expressions in query predicates</a></li><li><a href="#generic-matchers" class="table-of-contents__link toc-highlight">Generic matchers</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">2025 LAMP Consortium & Division of Digital Psychiatry @ BIDMC</div></div></div></footer></div>
</body>
</html>