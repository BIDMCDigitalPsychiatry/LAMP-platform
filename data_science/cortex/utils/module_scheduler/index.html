<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="LAMP Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="LAMP Platform Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="LAMP Platform JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-192736629-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Module scheduler | LAMP Platform</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.lamp.digital/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.lamp.digital/logo.png"><meta data-react-helmet="true" property="og:url" content="https://docs.lamp.digital/data_science/cortex/utils/module_scheduler"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Module scheduler | LAMP Platform"><meta data-react-helmet="true" name="description" content="The module scheduling code allows researchers to specify a set of activities as a &quot;module&quot; which can then be used to easily schedule sets of activities for participants."><meta data-react-helmet="true" property="og:description" content="The module scheduling code allows researchers to specify a set of activities as a &quot;module&quot; which can then be used to easily schedule sets of activities for participants."><link data-react-helmet="true" rel="icon" href="/./docs/assets/logo.png"><link data-react-helmet="true" rel="canonical" href="https://docs.lamp.digital/data_science/cortex/utils/module_scheduler"><link data-react-helmet="true" rel="alternate" href="https://docs.lamp.digital/data_science/cortex/utils/module_scheduler" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.lamp.digital/data_science/cortex/utils/module_scheduler" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5ca36a7b.css">
<link rel="preload" href="/assets/js/runtime~main.83783cb8.js" as="script">
<link rel="preload" href="/assets/js/main.83e99c5b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="LAMP Platform" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/logo.png" alt="LAMP Platform" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">LAMP Platform</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link" href="/">User Guide</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/app">Download App</a></li><li><a class="dropdown__link" href="/bug">Report Bug</a></li><li><a class="dropdown__link" href="/faq">FAQ</a></li></ul></div><a class="navbar__item navbar__link" href="/api">API</a><a class="navbar__item navbar__link" href="/blog">What&#x27;s New</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://mindlamp.discourse.group/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/BIDMCDigitalPsychiatry/LAMP-platform/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="mailto:team@digitalpsych.org" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Contact<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">LAMP Platform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/app">Quick Links</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/about/intro">Users and Publications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/using/learn">How to use mindLAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/start_here/overview">Setting up mindLAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/deploy/prereqs">Deploying LAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/develop/intro">Developing LAMP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/data_science/intro">Cortex &amp; API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/data_science/data_types/activity_types">Data Types</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/data">How does the LAMP Data Format Work?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/python">Preparing to Analyze Your Data in Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/r">Preparing to Analyze Your Data in R</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/data_science/cortex/getting-started">Cortex</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/getting-started">Cortex Quick Start Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/what_is_cortex">What is Cortex?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/running_cortex">Running Cortex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/advanced">Advanced Usage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/data_science/cortex/features/primary/overview">Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/data_science/cortex/visualizations/data_quality">Visualizations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/data_science/cortex/utils/general_functions">Util Functions</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/utils/general_functions">General functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/data_science/cortex/utils/module_scheduler">Module scheduler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/utils/activities">Activity functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/utils/sensors">Sensor functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/utils/database">Database functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/utils/notifications">Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/utils/miscellaneous">Miscellaneous</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/cortex/developing_cortex">Adding Cortex Features</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/jsonata">Using Document Transformations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/data_portal">Using the LAMP Data Portal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data_science/tags">Tags &amp; Attachments</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/consortium/admin/checklist">Consortium</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/troubleshooting">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Module scheduler</h1></header><p>The module scheduling code allows researchers to specify a set of activities as a &quot;module&quot; which can then be used to easily schedule sets of activities for participants.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="module-specification">Module specification<a class="hash-link" href="#module-specification" title="Direct link to heading">â€‹</a></h2><p>First, the researcher must specify what activities consitutes a module and how they should be arranged in time. Modules should be specified in a json file. Each module must include the name of the module (which should be the key in the dictionary) and a dictionary containing:</p><ul><li>&quot;activities&quot;: the list of names of activities for the module which should already exist in the participants</li><li>&quot;daily&quot;: the list of either &quot;none&quot; or &quot;daily&quot; for if the activity should repeat daily or only occur once</li><li>&quot;times&quot;: the start times of each activity (relative to the start of the module, see example below)</li><li>&quot;message&quot;: a message to send to the participant (optional, put &quot;&quot; for no message)</li></ul><p>Here is a sample specification:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;trial_period&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;activities&quot;: [&quot;Trial Period Day 1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Trial Period Day 2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Trial Period Day 3&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;daily&quot;: [&quot;none&quot;, &quot;none&quot;, &quot;none&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;times&quot;: [0, 86400000, 172800000],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;gratitude_journal&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;activities&quot;: [&quot;Gratitude&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Gratitude Journal Day 1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Gratitude Journal Day 2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Gratitude Journal Day 3&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Gratitude Journal Day 4&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Gratitude Journal Day 5&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       &quot;Gratitude Journal Day 6&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;daily&quot;: [&quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  &quot;none&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;times&quot;: [-60000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   60000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   86400000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   172800000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   259200000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   345600000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                   432000000],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;This week&#x27;s module centers around gratitude.&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In the example above, we have specified two modules, &quot;trial_period&quot; and &quot;gratitude_journal&quot;. The &quot;trial_period&quot; module has 3 activities, none of which repeat. The first one will occur at the time of scheduling (for example, at 6pm on that day), the second one will happen 86400000 ms later (ie at 6pm on the second day), and the third one will happen 172800000 ms later (ie at 6pm on the third day). Notice that the first activity for &quot;gratitude_journal&quot; has a negative time. This will schedule the activity 1 minute before the scheduled start time, or at 5:59pm.</p><p>Please see the source code examples for more information here: <a href="https://github.com/BIDMCDigitalPsychiatry/LAMP-cortex/tree/master/cortex/utils" target="_blank" rel="noopener noreferrer">https://github.com/BIDMCDigitalPsychiatry/LAMP-cortex/tree/master/cortex/utils</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="setting-module-schedules">Setting module schedules<a class="hash-link" href="#setting-module-schedules" title="Direct link to heading">â€‹</a></h2><p>Once modules have been specified, they can be scheduled in one of two ways:</p><ol><li>Configuring participant attachments to tell the system which modules should be assigned and when. Then <code>correct_modules()</code> is used to update participant module schedules.</li><li>Use the <code>schedule_module()</code> function directly.</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="method-1-utilsmodule_schedulercorrect_modules">Method 1: <code>utils.module_scheduler.correct_modules</code><a class="hash-link" href="#method-1-utilsmodule_schedulercorrect_modules" title="Direct link to heading">â€‹</a></h3><p>This method requires two tags be set on participants: a phase tag and a modules tag. Here is an example phase tag:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;status&quot;: &quot;enrolled&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;phases&quot;: {&quot;enrolled&quot;: 1649217600000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             &quot;trial&quot;: 1648353600000}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>&quot;phases&quot; is the dictionary that holds when (in miliseconds) the participant started each phase of the study. Module scheduling is designed to only occur for particpants in the &quot;enrolled&quot; or &quot;trial&quot; phase. The module scheduler will check how long the participant has been in the given phase to determine which module should be scheduled. </p><p>The second required tag is a module tag. For example:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;trial_period&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      &quot;module&quot;: &quot;trial_period&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      &quot;phase&quot;: &quot;trial&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      &quot;start_end&quot;: [0, 345600000],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      &quot;shift&quot;: 18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;gratitude_journal&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     &quot;module&quot;: &quot;gratitude_journal&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     &quot;phase&quot;: &quot;enrolled&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     &quot;start_end&quot;: [0, 518400000],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     &quot;shift&quot;: 18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In this example, the participant will have the &quot;trial_period&quot; module scheduled when they are in time 0 to 345600000 ms (first 4 days) of the &quot;trial&quot; phase. In addition, the activity schedule will start at 18 (18:00), or 6pm. The &quot;gratitude_journal&quot; module will be during the &quot;enrolled&quot; phase and will last from the start of enrollment (0 ms) to the end of the first week (518400000 ms = day 6). This module will also be shifted in time to start at 6pm (18:00).</p><p>With the modules specified, and phase / module tags set on the participant, correct_modules() can be called to 1) check which module the participant should be scheduled for 2) determine if this matches with the current scheduled activities and 3) make any necessary corrections to the schedules. It typically makes sense to call this function once every day or so. </p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="args">Args<a class="hash-link" href="#args" title="Direct link to heading">â€‹</a></h4><ul><li><code>part_id</code>: (string) the participant ID.</li><li><code>PHASE_TAG</code>: (string) the name of the phase tag.</li><li><code>MODULE_TAG</code>: (string) the name of the module tag.</li><li><code>module_json</code>: (dict, default: MODULE_JSON) the module specificaitons.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example">Example<a class="hash-link" href="#example" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg language-markdown theme-code-block"><div class="codeBlockContent_csEI markdown"><pre tabindex="0" class="prism-code language-markdown codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">utils.module_scheduler.correct_modules(&quot;U1234567890&quot;, &quot;my_study.phases&quot;, &quot;my_study.modules&quot;, MODULE_JSON)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><hr><h3 class="anchor anchorWithStickyNavbar_y2LR" id="method-2-utilsmodule_schedulerschedule_module">Method 2: <code>utils.module_scheduler.schedule_module</code><a class="hash-link" href="#method-2-utilsmodule_schedulerschedule_module" title="Direct link to heading">â€‹</a></h3><p>This function is a helper function for <code>correct_modules()</code> and can be used to schedule a module for a participant.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="args-1">Args<a class="hash-link" href="#args-1" title="Direct link to heading">â€‹</a></h4><ul><li><code>part_id</code>: (string) the participant ID.</li><li><code>module_name</code>: (string) the name of the module to schedule. This must be a name in the module json.</li><li><code>start_time</code>: (int, units: ms) the time to use as the &quot;start&quot; / reference time for the module. This does not need to be the time of the first activity. In addition, you can use negative times to schedule some activities before the start.</li><li><code>module_json</code>: (dict) the specification for the modules. </li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example-1">Example<a class="hash-link" href="#example-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg language-markdown theme-code-block"><div class="codeBlockContent_csEI markdown"><pre tabindex="0" class="prism-code language-markdown codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">utils.module_scheduler.schedule_module(&quot;U1234567890&quot;, &quot;gratitude_journal&quot;, 1648368000000, module_json)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Please see the top of this page for the example <code>module_json</code>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="other-useful-functions">Other useful functions<a class="hash-link" href="#other-useful-functions" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="utilsmodule_schedulerunschedule_other_surveys"><code>utils.module_scheduler.unschedule_other_surveys</code><a class="hash-link" href="#utilsmodule_schedulerunschedule_other_surveys" title="Direct link to heading">â€‹</a></h3><p>Uschedule all surveys for a participant (except those specified in <code>keep_these</code>).</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="args-2">Args<a class="hash-link" href="#args-2" title="Direct link to heading">â€‹</a></h4><ul><li><code>part_id</code>: (string) the participant ID.</li><li><code>keep_these</code>: (list of strings) names of any surveys to keep the schedules for.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example-2">Example<a class="hash-link" href="#example-2" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg language-markdown theme-code-block"><div class="codeBlockContent_csEI markdown"><pre tabindex="0" class="prism-code language-markdown codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">utils.module_scheduler.unschedule_other_surveys(&quot;U1234567890&quot;, keep_these=[&quot;Morning Daily Survey&quot;, &quot;Weekly Survey&quot;])</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="utilsmodule_schedulerunschedule_specific_survey"><code>utils.module_scheduler.unschedule_specific_survey</code><a class="hash-link" href="#utilsmodule_schedulerunschedule_specific_survey" title="Direct link to heading">â€‹</a></h3><p>Uschedule a specific survey.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="args-3">Args<a class="hash-link" href="#args-3" title="Direct link to heading">â€‹</a></h4><ul><li><code>part_id</code>: (string) the participant ID.</li><li><code>survey_name</code>: (string) the name of the survey to unschedule.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example-3">Example<a class="hash-link" href="#example-3" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg language-markdown theme-code-block"><div class="codeBlockContent_csEI markdown"><pre tabindex="0" class="prism-code language-markdown codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">utils.module_scheduler.unschedule_specific_survey(&quot;U1234567890&quot;, &quot;Gratitude Journal Day 3&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/BIDMCDigitalPsychiatry/LAMP-platform/edit/master/docs/09-data_science/06-cortex/07-utils/02-module_scheduler.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-05T14:46:22.000Z">8/5/2022</time></b> by <b>Lucy Gray</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/data_science/cortex/utils/general_functions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">General functions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/data_science/cortex/utils/activities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Activity functions</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#module-specification" class="table-of-contents__link toc-highlight">Module specification</a></li><li><a href="#setting-module-schedules" class="table-of-contents__link toc-highlight">Setting module schedules</a><ul><li><a href="#method-1-utilsmodule_schedulercorrect_modules" class="table-of-contents__link toc-highlight">Method 1: <code>utils.module_scheduler.correct_modules</code></a></li><li><a href="#method-2-utilsmodule_schedulerschedule_module" class="table-of-contents__link toc-highlight">Method 2: <code>utils.module_scheduler.schedule_module</code></a></li><li><a href="#other-useful-functions" class="table-of-contents__link toc-highlight">Other useful functions</a></li><li><a href="#utilsmodule_schedulerunschedule_other_surveys" class="table-of-contents__link toc-highlight"><code>utils.module_scheduler.unschedule_other_surveys</code></a></li><li><a href="#utilsmodule_schedulerunschedule_specific_survey" class="table-of-contents__link toc-highlight"><code>utils.module_scheduler.unschedule_specific_survey</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2021 LAMP Consortium & Division of Digital Psychiatry @ BIDMC</div></div></div></footer></div>
<script src="/assets/js/runtime~main.83783cb8.js"></script>
<script src="/assets/js/main.83e99c5b.js"></script>
</body>
</html>